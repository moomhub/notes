<template><h1 id="stream-æ•´åˆ-rocketmq-å®ç°äº‹åŠ¡æ¶ˆæ¯-ä¸‰" tabindex="-1"><a class="header-anchor" href="#stream-æ•´åˆ-rocketmq-å®ç°äº‹åŠ¡æ¶ˆæ¯-ä¸‰" aria-hidden="true">#</a> Stream æ•´åˆ Rocketmq å®ç°äº‹åŠ¡æ¶ˆæ¯ï¼ˆä¸‰ï¼‰</h1>
<h1 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡æ€§æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡æ€§æ¶ˆæ¯" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯äº‹åŠ¡æ€§æ¶ˆæ¯</h1>
<p>é€šè¿‡åœºæ™¯æ¥çœ‹ï¼š</p>
<p>ç”Ÿæˆè®¢å•è®°å½• -&gt; MQ -&gt; å¢åŠ ç§¯åˆ†,æˆ‘ä»¬éœ€è¦ä¿è¯æ¶ˆæ¯çš„å‘é€ä¸è®¢å•æ•°æ®çš„æ’å…¥è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p>
<p>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</p>
<p>æˆ‘ä»¬æ˜¯åº”è¯¥å…ˆåˆ›å»ºè®¢å•ï¼Œè¿˜æ˜¯å…ˆå‘é€MQæ¶ˆæ¯ï¼Ÿ</p>
<p>1ã€å…ˆå‘é€MQæ¶ˆæ¯ï¼šå¦‚æœæ¶ˆæ¯å‘é€æˆåŠŸï¼Œè€Œè®¢å•åˆ›å»ºå¤±è´¥ï¼Œæ²¡åŠæ³•æŠŠæ¶ˆæ¯æ”¶å›æ¥ã€‚</p>
<p>2ã€å…ˆåˆ›å»ºè®¢å•ï¼šå¦‚æœè®¢å•åˆ›å»ºæˆåŠŸåMQæ¶ˆæ¯å‘é€å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºä¸¤ä¸ªæ“ä½œåœ¨ä¸€ä¸ªäº‹åŠ¡ä»£ç å—ä¸­ï¼Œæ‰€ä»¥è®¢å•æ•°æ®ä¼šå›æ»šã€‚</p>
<p>ä½†æ˜¯ç½‘ç»œæ˜¯ä¸ç¨³å®šçš„ï¼Œå¦‚æœMQç«¯ç¡®å®æ”¶åˆ°äº†è¿™æ¡æ¶ˆæ¯ï¼Œåªæ˜¯è¿”å›ç»™å®¢æˆ·ç«¯çš„å“åº”ä¸¢å¤±äº†ï¼Œå°±å‡ºç°è·Ÿ1ä¸€æ ·çš„é—®é¢˜ã€‚</p>
<h1 id="é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> é…ç½®æ–‡ä»¶</h1>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">rocketmq</span><span class="token punctuation">:</span>
        <span class="token key atrule">binder</span><span class="token punctuation">:</span>
          <span class="token key atrule">name-server</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">9876</span>
          <span class="token key atrule">enable-msg-trace</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
          <span class="token key atrule">transactional_message_output</span><span class="token punctuation">:</span>
            <span class="token key atrule">producer</span><span class="token punctuation">:</span>
              <span class="token comment"># åŒæ­¥å‘é€æ¶ˆæ¯</span>
              <span class="token key atrule">sync</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
              <span class="token key atrule">group</span><span class="token punctuation">:</span> transactional_stream_group
              <span class="token comment"># å¼€å¯äº‹åŠ¡æ”¯æŒ</span>
              <span class="token key atrule">transactional</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">transactional_message_output</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> message<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>topic4 <span class="token comment"># ç›¸å½“äº rocketmq çš„ topic</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment"># è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºå¯¹è±¡jsonï¼Œå¦‚æœæ˜¯æ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h1 id="äº‹åŠ¡æ¶ˆæ¯ç”Ÿäº§è€…" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡æ¶ˆæ¯ç”Ÿäº§è€…" aria-hidden="true">#</a> äº‹åŠ¡æ¶ˆæ¯ç”Ÿäº§è€…</h1>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>  @Override
    @Transactional(rollbackFor = Exception.class)
    public Boolean sendTransactionalMessage(HashMap&lt;String, Object> headers, Object object) {
    //      ã€‚ã€‚ã€‚æ•°æ®åº“äº‹åŠ¡   ä¿å­˜æˆ–æ·»åŠ 
        log.info("ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å®Œæˆï¼Œå¼€å§‹å‘é€äº‹åŠ¡æ¶ˆæ¯ï¼");
        String transaction_id = UUID.randomUUID().toString().replaceAll("-", "");
        MessageBuilder&lt;Object> builder = MessageBuilder.withPayload(object);
        headers.put(RocketMQHeaders.TRANSACTION_ID, transaction_id);
        builder.copyHeaders(headers);
        Message&lt;Object> transactionMessage = builder.build();
        MessageChannel delayMessageChannel = this.messageSendChannel.transactional_output();
        boolean delay_ok = delayMessageChannel.send(transactionMessage);
        log.info("äº‹åŠ¡æ¶ˆæ¯å‘é€å‘é€çŠ¶æ€ï¼š [{}]", delay_ok);
        return delay_ok;
    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h1 id="rocketmqäº‹åŠ¡ç›‘å¬" tabindex="-1"><a class="header-anchor" href="#rocketmqäº‹åŠ¡ç›‘å¬" aria-hidden="true">#</a> RocketMQäº‹åŠ¡ç›‘å¬</h1>
<div class="language-java ext-java line-numbers-mode"><pre v-pre class="language-java"><code><span class="token annotation punctuation">@RocketMQTransactionListener</span><span class="token punctuation">(</span>txProducerGroup <span class="token operator">=</span> <span class="token string">"transactional_stream_group"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RocketMQMessageTransactionListener</span> <span class="token keyword">implements</span> <span class="token class-name">RocketMQLocalTransactionListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ‰§è¡Œæœ¬åœ°äº‹åŠ¡
     * â‘ äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œcommit
     * â‘¡äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œrollback
     * â‘¢å›æŸ¥å‘é€æ¶ˆæ¯ï¼Œunknown
     *
     * <span class="token keyword">@param</span> <span class="token parameter">message</span>
     * <span class="token keyword">@param</span> <span class="token parameter">o</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">RocketMQLocalTransactionState</span> <span class="token function">executeLocalTransaction</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token doc-comment comment">/**
         * æŸ¥è¯¢ä¹‹å‰çš„æ¶ˆæ¯æ˜¯å¦å·²ç»æ·»åŠ æ•°æ®æ•°æ®åº“
         * */</span>
        <span class="token keyword">return</span> <span class="token class-name">RocketMQLocalTransactionState</span><span class="token punctuation">.</span>ROLLBACK<span class="token punctuation">;</span>
<span class="token comment">//        try {</span>
<span class="token comment">//            // è·å–å‰é¢ç”Ÿæˆçš„äº‹åŠ¡ID</span>
<span class="token comment">//            String transactionId = (String) message.getHeaders().get(RocketMQHeaders.TRANSACTION_ID);</span>
<span class="token comment">//            // ä»¥äº‹åŠ¡IDä¸ºä¸»é”®ï¼Œæ‰§è¡Œæœ¬åœ°äº‹åŠ¡</span>
<span class="token comment">////            Order order = (Order) message.getPayload();</span>
<span class="token comment">//            boolean result = this.saveOrder(new Stream(), transactionId);</span>
<span class="token comment">//            return result ? RocketMQLocalTransactionState.COMMIT : RocketMQLocalTransactionState.ROLLBACK;</span>
<span class="token comment">//        } catch (Exception e) {</span>
<span class="token comment">//            return RocketMQLocalTransactionState.ROLLBACK;</span>
<span class="token comment">//        }</span>
    <span class="token punctuation">}</span>

<span class="token comment">//    private boolean saveOrder(Stream order, String transactionId) {</span>
<span class="token comment">//        // å°†äº‹åŠ¡IDè®¾ç½®ä¸ºå”¯ä¸€é”®</span>
<span class="token comment">//        // è°ƒç”¨æ•°æ®åº“Insert into è®¢å•è¡¨</span>
<span class="token comment">//        return true;</span>
<span class="token comment">//    }</span>


    <span class="token doc-comment comment">/**
     * æ‰§è¡Œæœ¬åœ°äº‹åŠ¡å›æŸ¥ï¼Œå½“çŠ¶æ€ä¸º UNKNOW ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå›æŸ¥é—´éš”æ—¶é—´å·®ä¸å¤šä¸€åˆ†é’Ÿã€‚
     * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
     * ä¸šåŠ¡ä»£ç ç”¨æ¥æ£€æŸ¥äº‹åŠ¡å½“å‰çŠ¶æ€ï¼Œæ˜¯å¦æ‰§è¡Œå®Œæˆï¼Œå¦‚æœå®Œæˆå°±æ‰§è¡Œ COMMIT
     *
     * <span class="token keyword">@param</span> <span class="token parameter">message</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">RocketMQLocalTransactionState</span> <span class="token function">checkLocalTransaction</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"åˆ¤æ–­è¿œç¨‹æ¶ˆæ¯æ˜¯å¦å®Œæˆã€å®Œæˆå°±æäº¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> transactionId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> message<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">RocketMQHeaders</span><span class="token punctuation">.</span>TRANSACTION_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»¥äº‹åŠ¡IDä¸ºä¸»é”®ï¼ŒæŸ¥è¯¢æœ¬åœ°äº‹åŠ¡æ‰§è¡Œæƒ…å†µ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSuccess</span><span class="token punctuation">(</span>transactionId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">RocketMQLocalTransactionState</span><span class="token punctuation">.</span>COMMIT<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">RocketMQLocalTransactionState</span><span class="token punctuation">.</span>ROLLBACK<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token class-name">String</span> transactionId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥è¯¢æ•°æ®åº“ select from è®¢å•è¡¨</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>@RocketMQTransactionListener æ³¨è§£ï¼Œå£°æ˜ç›‘å¬å™¨çš„æ˜¯ç”Ÿäº§è€…åˆ†ç»„æ˜¯ &quot;transactional_stream_group&quot; çš„ Producer å‘é€çš„äº‹åŠ¡æ¶ˆæ¯ã€‚å› ä¸º RocketMQ æ˜¯å›æŸ¥ï¼ˆè¯·æ±‚ï¼‰æŒ‡å®šæŒ‡å®šç”Ÿäº§åˆ†ç»„ä¸‹çš„ Producerï¼Œä»è€Œè·å¾—äº‹åŠ¡æ¶ˆæ¯çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸€å®šè¦æ­£ç¡®è®¾ç½®ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼ŒSpring Cloud Alibaba Stream RocketMQ å·²ç»ä½¿ç”¨ Producer å‘é€äº†ä¸€æ¡äº‹åŠ¡æ¶ˆæ¯ï¼Œæœ¬æ–¹æ³•é‡Œé¢æˆ‘ä»¬ä½¿ç”¨æ¶ˆæ¯å†…å®¹è¿›è¡Œæœ¬åœ°æ•°æ®åº“äº‹åŠ¡æ“ä½œã€‚ç„¶åæ ¹æ®è¯¥æ–¹æ³•æ‰§è¡Œçš„è¿”å›çš„ RocketMQLocalTransactionState ç»“æœï¼Œæäº¤è¿˜æ˜¯å›æ»šè¯¥äº‹åŠ¡æ¶ˆæ¯ã€‚</p>
<p>å®ç° #executeLocalTransaction(...) æ–¹æ³•ï¼Œæ£€æŸ¥æœ¬åœ°äº‹åŠ¡(æˆ–è€…åœ¨æ­¤æäº¤ç›¸å…³çš„äº‹åŠ¡)ï¼Œé€šè¿‡ç›¸å…³ç»“æœçš„åˆ¤æ–­æ˜¯æäº¤è¿˜æ˜¯å›æ»šäº‹åŠ¡æ¶ˆæ¯ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ–¹å¼å®ç°æœ¬åœ°äº‹åŠ¡å›æŸ¥æ—¶ï¼Œè¿”å›äº‹åŠ¡æ¶ˆæ¯çš„çŠ¶æ€ã€‚</p>
<p>ç¬¬ä¸€ç§ï¼Œé€šè¿‡ msg æ¶ˆæ¯ï¼Œè·å¾—æŸä¸ªä¸šåŠ¡ä¸Šçš„æ ‡è¯†æˆ–è€…ç¼–å·ï¼Œç„¶åå»æ•°æ®åº“ä¸­æŸ¥è¯¢ä¸šåŠ¡è®°å½•ï¼Œä»è€Œåˆ¤æ–­è¯¥äº‹åŠ¡æ¶ˆæ¯çš„çŠ¶æ€æ˜¯æäº¤è¿˜æ˜¯å›æ»šã€‚</p>
<p>ç¬¬äºŒç§ï¼Œè®°å½• msg çš„äº‹åŠ¡ç¼–å·ï¼Œä¸äº‹åŠ¡çŠ¶æ€åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œåœ¨ #executeLocalTransaction(...) æ–¹æ³•ä¸­ï¼Œå…ˆå­˜å‚¨ä¸€æ¡ id ä¸º msg çš„äº‹åŠ¡ç¼–å·ï¼ŒçŠ¶æ€ä¸º RocketMQLocalTransactionState.UNKNOWN çš„è®°å½•ã€‚<br />ç¬¬äºŒæ­¥ï¼Œè°ƒç”¨å¸¦æœ‰äº‹åŠ¡çš„ä¸šåŠ¡ Service çš„æ–¹æ³•ã€‚åœ¨è¯¥ Service æ–¹æ³•ä¸­ï¼Œåœ¨é€»è¾‘éƒ½æ‰§è¡ŒæˆåŠŸçš„æƒ…å†µä¸‹ï¼Œæ›´æ–° id ä¸º msg çš„äº‹åŠ¡ç¼–å·ï¼ŒçŠ¶æ€å˜æ›´ä¸º RocketMQLocalTransactionState.COMMIT ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼´éšè¿™ä¸ªäº‹åŠ¡çš„æäº¤ï¼Œæ›´æ–° id ä¸º msg çš„äº‹åŠ¡ç¼–å·çš„è®°å½•çš„çŠ¶ä¸º RocketMQLocalTransactionState.COMMIT ï¼Œç¾æ»‹æ»‹ã€‚ã€‚<br />ç¬¬ä¸‰æ­¥ï¼Œè¦ä»¥ try-catch çš„æ–¹å¼ï¼Œè°ƒç”¨ä¸šåŠ¡ Service çš„æ–¹æ³•ã€‚å¦‚æ­¤ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œå›æ»šäº‹åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨ catch ä¸­ï¼Œæ›´æ–° id ä¸º msg çš„äº‹åŠ¡ç¼–å·çš„è®°å½•çš„çŠ¶æ€ä¸º RocketMQLocalTransactionState.ROLLBACK ã€‚ğŸ˜­ æç«¯æƒ…å†µä¸‹ï¼Œå¯èƒ½æ›´æ–°å¤±è´¥ï¼Œåˆ™æ‰“å° error æ—¥å¿—ï¼Œå‘Šè­¦çŸ¥é“ï¼Œäººå·¥ä»‹å…¥ã€‚<br />å¦‚æ­¤ä¸‰æ­¥ä¹‹åï¼Œæˆ‘ä»¬åœ¨ #executeLocalTransaction(...) æ–¹æ³•ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥æ‰¾æ•°æ®åº“ï¼Œid ä¸º msg çš„äº‹åŠ¡ç¼–å·çš„è®°å½•çš„çŠ¶æ€ï¼Œç„¶åè¿”å›ã€‚<br />ç›¸æ¯”æ¥è¯´ï¼Œå€¾å‘ç¬¬ä¸€ç§ï¼Œå®ç°æ›´åŠ ç®€å•é€šç”¨ï¼Œå¯¹äºä¸šåŠ¡å¼€å‘è€…ï¼Œæ›´åŠ å‹å¥½ã€‚å’Œæœ‰å‡ ä¸ªæœ‹å‹æ²Ÿé€šäº†ä¸‹ï¼Œä½†ä»–ä»¬æ˜¯é‡‡ç”¨ç¬¬äºŒç§ã€‚</p>
</template>
