import{_ as t,r as o,o as l,c,b as a,d as e,e as n,a as p}from"./app.4a9c1875.js";const i={},r=a("h1",{id:"docker-\u5B89\u88C5nacos",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#docker-\u5B89\u88C5nacos","aria-hidden":"true"},"#"),n(" Docker \u5B89\u88C5Nacos")],-1),u=a("h2",{id:"\u4E00\u3001\u62C9\u53D6\u955C\u50CF",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#\u4E00\u3001\u62C9\u53D6\u955C\u50CF","aria-hidden":"true"},"#"),n(" \u4E00\u3001\u62C9\u53D6\u955C\u50CF")],-1),d=a("p",null,"docker \u67E5\u8BE2\u6700\u65B0Nacos \u7248\u672C",-1),v={href:"https://hub.docker.com/r/nacos/nacos-server/tags",target:"_blank",rel:"noopener noreferrer"},k=n("https://hub.docker.com/r/nacos/nacos-server/tags"),m=p(`<hr><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull nacos/nacos-server:1.4.0
<span class="token function">docker</span> images
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C\u3001\u521B\u5EFA\u672C\u5730\u6620\u5C04\u76EE\u5F55\u548C\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u521B\u5EFA\u672C\u5730\u6620\u5C04\u76EE\u5F55\u548C\u6587\u4EF6" aria-hidden="true">#</a> \u4E8C\u3001\u521B\u5EFA\u672C\u5730\u6620\u5C04\u76EE\u5F55\u548C\u6587\u4EF6</h2><h3 id="_1\u3001\u521B\u5EFA\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFA\u76EE\u5F55" aria-hidden="true">#</a> 1\u3001\u521B\u5EFA\u76EE\u5F55</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p /opt/docker/nacos/logs/   <span class="token comment"># \u65B0\u5EFAlogs\u76EE\u5F55</span>
<span class="token function">mkdir</span> -p /opt/docker/nacos/init.d/  
<span class="token function">vim</span> /mydata/nacos/init.d/custom.properties <span class="token comment"># \u4FEE\u6539\u914D\u7F6E\u6587\u4EF6</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u4FEE\u6539custom-properties\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4FEE\u6539custom-properties\u6587\u4EF6" aria-hidden="true">#</a> 2\u3001\u4FEE\u6539custom.properties\u6587\u4EF6</h3><blockquote><p>\u8981\u914D\u7F6Emysql\uFF0C\u67E5\u770BMySQL\u8D26\u53F7\u548C\u5730\u5740</p></blockquote><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">erver.contextPath</span><span class="token punctuation">=</span><span class="token value attr-value">/nacos</span>
<span class="token key attr-name">server.servlet.contextPath</span><span class="token punctuation">=</span><span class="token value attr-value">/nacos</span>
<span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8848</span>
<span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">db.num</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token comment"># \u8FD9\u91CC\u8981\u5BF9\u5E94ip\uFF0C\u4EE5\u53CA\u5BF9\u5E94\u7684\u6570\u636E\u5E93</span>
<span class="token key attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://172.18.0.10:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span>
<span class="token key attr-name">db.user</span><span class="token punctuation">=</span><span class="token value attr-value">nacos</span>
<span class="token key attr-name">db.password</span><span class="token punctuation">=</span><span class="token value attr-value">nacos</span>
<span class="token key attr-name">nacos.cmdb.dumpTaskInterval</span><span class="token punctuation">=</span><span class="token value attr-value">3600</span>
<span class="token key attr-name">nacos.cmdb.eventTaskInterval</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token key attr-name">nacos.cmdb.labelTaskInterval</span><span class="token punctuation">=</span><span class="token value attr-value">300</span>
<span class="token key attr-name">nacos.cmdb.loadDataAtStart</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">management.metrics.export.elastic.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">management.metrics.export.influx.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">server.tomcat.accesslog.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">server.tomcat.accesslog.pattern</span><span class="token punctuation">=</span><span class="token value attr-value">%h %l %u %t &quot;%r&quot; %s %b %D %{User-Agent}i</span>
<span class="token key attr-name">nacos.security.ignore.urls</span><span class="token punctuation">=</span><span class="token value attr-value">/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/v1/auth/login,/v1/console/health/**,/v1/cs/**,/v1/ns/**,/v1/cmdb/**,/actuator/**,/v1/console/server/**</span>
<span class="token key attr-name">nacos.naming.distro.taskDispatchThreadCount</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">nacos.naming.distro.taskDispatchPeriod</span><span class="token punctuation">=</span><span class="token value attr-value">200</span>
<span class="token key attr-name">nacos.naming.distro.batchSyncKeyCount</span><span class="token punctuation">=</span><span class="token value attr-value">1000</span>
<span class="token key attr-name">nacos.naming.distro.initDataRatio</span><span class="token punctuation">=</span><span class="token value attr-value">0.9</span>
<span class="token key attr-name">nacos.naming.distro.syncRetryDelay</span><span class="token punctuation">=</span><span class="token value attr-value">5000</span>
<span class="token key attr-name">nacos.naming.data.warmup</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">nacos.naming.expireInstance</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09\u3001\u542F\u52A8docker\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u542F\u52A8docker\u5BB9\u5668" aria-hidden="true">#</a> \u4E09\u3001\u542F\u52A8docker\u5BB9\u5668</h2><p>\u524D\u63D0\u6761\u4EF6\u505A\u597D\u540E\uFF0C\u5C31\u53EF\u4EE5\u4E0B\u8FD0\u884C\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span>  run --name nacos -p <span class="token number">8848</span>:8848   <span class="token punctuation">\\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.20 <span class="token punctuation">\\</span>
--restart<span class="token operator">=</span>always <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMS</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMX</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMN</span><span class="token operator">=</span>32m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_MS</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_MMS</span><span class="token operator">=</span>32m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">PREFER_HOST_MODE</span><span class="token operator">=</span>hostname <span class="token punctuation">\\</span>
-v /opt/docker/nacos/logs:/home/nacos/logs <span class="token punctuation">\\</span>
-v /opt/docker/nacos/init.d/custom.properties:/home/nacos/init.d/custom.properties <span class="token punctuation">\\</span>
-d nacos/nacos-server:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span>  run --name nacos -p <span class="token number">8848</span>:8848   <span class="token punctuation">\\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.20 <span class="token punctuation">\\</span>
--restart<span class="token operator">=</span>always <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMS</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMX</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_XMN</span><span class="token operator">=</span>32m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_MS</span><span class="token operator">=</span>64m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">JVM_MMS</span><span class="token operator">=</span>32m <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">PREFER_HOST_MODE</span><span class="token operator">=</span>hostname <span class="token punctuation">\\</span>
-v /opt/docker/nacos/logs:/home/nacos/logs <span class="token punctuation">\\</span>
-d nacos/nacos-server:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12),b=n("\u7136\u540E\u5C31\u53EF\u4EE5\u67E5\u770Bnacos\u662F\u5426\u542F\u52A8\uFF0C\u5C31\u53EF\u4EE5\u8FDB\u884C\u8BBF\u95EE\uFF0Cip:8848/nacos\uFF0C\u8D26\u53F7\u5BC6\u7801\u4E00\u822C\u90FD\u662F\u9ED8\u8BA4\uFF0Cnacos/nacos\uFF0C\u8FD9\u4E2A\u8981\u6839\u636E\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u3002\u53E6\u5916\uFF0C\u82E5\u6CA1\u6709sql\u547D\u4EE4\uFF0C\u53EF\u53C2\u8003\u4E00\u4E0B\u5B98\u65B9\u7ED9\u51FA\u7684\u6570\u636E\u5E93\u6837\u4F8B"),h={href:"https://github.com/alibaba/nacos/blob/master/config/src/main/resources/META-INF/nacos-db.sql",target:"_blank",rel:"noopener noreferrer"},g=n("nacos-db.sql"),_=a("p",null,[n("GRANT ALL PRIVILEGES ON "),a("em",null,"."),n(" TO 'nacos'@'%' IDENTIFIED BY 'nacos' WITH GRANT OPTION;")],-1);function f(y,M){const s=o("ExternalLinkIcon");return l(),c("div",null,[r,u,d,a("p",null,[a("a",v,[k,e(s)])]),m,a("p",null,[b,a("a",h,[g,e(s)])]),_])}var E=t(i,[["render",f],["__file","Docker\u5B89\u88C5Nacos.html.vue"]]);export{E as default};
