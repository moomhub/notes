import{_ as s,o as n,c as a,a as t}from"./app.4a9c1875.js";const e={},p=t(`<h1 id="stream-\u6574\u5408-rocketmq-\u5B9E\u73B0\u5EF6\u65F6\u6D88\u606F-\u4E8C" tabindex="-1"><a class="header-anchor" href="#stream-\u6574\u5408-rocketmq-\u5B9E\u73B0\u5EF6\u65F6\u6D88\u606F-\u4E8C" aria-hidden="true">#</a> Stream \u6574\u5408 Rocketmq \u5B9E\u73B0\u5EF6\u65F6\u6D88\u606F\uFF08\u4E8C\uFF09</h1><p>RocketMQ \u6682\u65F6\u4E0D\u652F\u6301\u4EFB\u610F\u7684\u65F6\u95F4\u7CBE\u5EA6\u7684\u5EF6\u8FDF\uFF0C\u800C\u662F\u56FA\u5316\u4E86 18 \u4E2A\u5EF6\u8FDF\u7EA7\u522B\u3002</p><blockquote><p>s\uFF1A\u79D2\u3001m\uFF1A\u5206\u949F\u3001h\uFF1A\u5C0F\u65F6\u3001d\uFF1A\u5929</p></blockquote><h2 id="rocketmq\u5185\u7F6E\u7684\u5EF6\u65F6\u7B49\u7EA7" tabindex="-1"><a class="header-anchor" href="#rocketmq\u5185\u7F6E\u7684\u5EF6\u65F6\u7B49\u7EA7" aria-hidden="true">#</a> RocketMQ\u5185\u7F6E\u7684\u5EF6\u65F6\u7B49\u7EA7</h2><p>\u5185\u7F6E\u7684broker 18\u4E2A\u7B49\u7EA7</p><table><thead><tr><th>\u5EF6\u8FDF\u7EA7\u522B</th><th>\u65F6\u95F4</th><th>\u5EF6\u8FDF\u7EA7\u522B</th><th>\u65F6\u95F4</th><th>\u5EF6\u8FDF\u7EA7\u522B</th><th>\u65F6\u95F4</th></tr></thead><tbody><tr><td>1</td><td>1s</td><td>7m</td><td>3</td><td>13</td><td>9m</td></tr><tr><td>2</td><td>5s</td><td>8m</td><td>4</td><td>14</td><td>10m</td></tr><tr><td>3</td><td>10s</td><td>9m</td><td>5</td><td>15</td><td>20m</td></tr><tr><td>4</td><td>30s</td><td>10m</td><td>6</td><td>16</td><td>30m</td></tr><tr><td>5</td><td>1m</td><td>11m</td><td>7</td><td>17</td><td>1h</td></tr><tr><td>6</td><td>2m</td><td>12m</td><td>8</td><td>18</td><td>2h</td></tr></tbody></table><p>\u5982\u679C\u60F3\u4FEE\u6539\u76F8\u5173\u7684\u7B49\u7EA7\u5BF9\u5E94\uFF0C\u53EF\u4EE5\u4FEE\u6539 <strong>bronk.conf</strong> \xA0\u5185 messageDelayLevel \u7684\u5185\u5BB9\u3002</p><div class="language-PowerShell ext-PowerShell line-numbers-mode"><pre class="language-PowerShell"><code>#...
messageDelayLevel=1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h
#...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="demo" tabindex="-1"><a class="header-anchor" href="#demo" aria-hidden="true">#</a> Demo</h2><p>\u901A\u8FC7\u6DFB\u52A0\u5934MessageConst.PROPERTY_DELAY_TIME_LEVEL\uFF0C\u8BBE\u7F6E\u6D88\u606F\u7684\u5EF6\u8FDF\u7EA7\u522B\uFF0C\u4ECE\u800C\u53D1\u9001\u5B9A\u65F6\u6D88\u606F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Object</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>
  <span class="token class-name">MessageBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">MessageConst</span><span class="token punctuation">.</span>PROPERTY_DELAY_TIME_LEVEL<span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  builder<span class="token punctuation">.</span><span class="token function">copyHeaders</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u8BF7\u6CE8\u610F\u6DFB\u52A0\u6D88\u606F\u5934\u6309\u6B63\u5E38\u5F02\u6B65\u6A21\u5F0F\u53D1\u9001\u6D88\u606F\uFF0C\u662F\u4E0D\u4F1A\u6B63\u5E38\u53D1\u9001\u5EF6\u8FDF\u6D88\u606F\u7684<br>\u4E00\u5B9A\u8981\u8BBE\u7F6E sync\uFF1A true \u5F00\u542F\u540C\u6B65\u53D1\u9001\u6D88\u606F\u624D\u80FD\u5B9E\u73B0\u5EF6\u65F6\u6D88\u606F</p></blockquote><p>\u6D88\u606F\u751F\u4EA7\u8005\u8BF7\u5728\u914D\u7F6E\u6587\u4EF6\u6DFB\u52A0\u5F02\u6B65\u6A21\u5F0F</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">rocketmq</span><span class="token punctuation">:</span>
        <span class="token key atrule">binder</span><span class="token punctuation">:</span>
          <span class="token key atrule">name-server</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">9876</span> <span class="token comment">#\u7ED1\u5B9Anamesever \u5730\u5740\uFF0C\u53EF\u4EE5\u591A\u4E2A</span>
          <span class="token key atrule">enable-msg-trace</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
          <span class="token key atrule">delay_message_output</span><span class="token punctuation">:</span>
            <span class="token key atrule">producer</span><span class="token punctuation">:</span>
              <span class="token key atrule">sync</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># \u662F\u5426\u540C\u6B65\u53D1\u9001\u6D88\u606F\uFF0C\u9ED8\u8BA4\u4E3A false \u5F02\u6B65\u3002     </span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">delay_message_output</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> message<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>topic3 <span class="token comment"># \u76F8\u5F53\u4E8E rocketmq \u7684 topic</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment"># \u8BBE\u7F6E\u6D88\u606F\u7C7B\u578B\uFF0C\u672C\u6B21\u4E3A\u5BF9\u8C61json\uFF0C\u5982\u679C\u662F\u6587\u672C\u5219\u8BBE\u7F6E\u201Ctext/plain\u201D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),c=[p];function l(o,d){return n(),a("div",null,c)}var u=s(e,[["render",l],["__file","Stream\u6574\u5408Rocketmq\u5B9E\u73B0\u5EF6\u65F6\u6D88\u606F(\u4E8C).html.vue"]]);export{u as default};
