<!DOCTYPE html>
<html lang="en-Zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/icon/favicon.ico"><meta name="application-name" content="MoomHub"><meta name="apple-mobile-web-app-title" content="MoomHub"><title>PXC 集群安装 | 青衣水袖</title><meta name="description" content="记录学习信息的文档">
    <link rel="modulepreload" href="/assets/app.4a9c1875.js"><link rel="modulepreload" href="/assets/PXC集群主机安装.html.04a9ffe0.js"><link rel="modulepreload" href="/assets/PXC集群主机安装.html.37e2d4fb.js"><link rel="prefetch" href="/assets/index.html.468fd202.js"><link rel="prefetch" href="/assets/随机数.html.e3d01a1e.js"><link rel="prefetch" href="/assets/TypeScript学习.html.6baf459a.js"><link rel="prefetch" href="/assets/Spring Boot 使用 Junit5测试.html.296e78aa.js"><link rel="prefetch" href="/assets/SpringBoot使用Log4j2日志框架.html.634eba63.js"><link rel="prefetch" href="/assets/SpringBoot多样化构建Docker.html.afab33b2.js"><link rel="prefetch" href="/assets/SpringBoot拦截器.html.84a45392.js"><link rel="prefetch" href="/assets/SpringBoot注解.html.c6e774de.js"><link rel="prefetch" href="/assets/SpringBoot项目Jar方式运行.html.f02763cf.js"><link rel="prefetch" href="/assets/helloworld.html.862da223.js"><link rel="prefetch" href="/assets/图形监控-Spring-Boot-Admin.html.ac745cbd.js"><link rel="prefetch" href="/assets/监控应用Spring-Boot-Actuator.html.a2cbd6f3.js"><link rel="prefetch" href="/assets/错误处理.html.bca399f9.js"><link rel="prefetch" href="/assets/MySql数据库相关概念.html.61316e19.js"><link rel="prefetch" href="/assets/Mysql查询优化-数据库优化.html.ddeac2f8.js"><link rel="prefetch" href="/assets/Mysql查询优化-语句优化.html.c1da6748.js"><link rel="prefetch" href="/assets/Mysql核心-索引.html.a83e5866.js"><link rel="prefetch" href="/assets/Mysql核心-视图.html.a1dbc1f1.js"><link rel="prefetch" href="/assets/Mysql项目-新零售数据库设计.html.1eb8a63b.js"><link rel="prefetch" href="/assets/Mysql项目-程序设计.html.f07fd66b.js"><link rel="prefetch" href="/assets/PerconaTookit工具.html.b175ecb8.js"><link rel="prefetch" href="/assets/mysql数据日志.html.f937338f.js"><link rel="prefetch" href="/assets/常用的Mysql命令.html.30719a11.js"><link rel="prefetch" href="/assets/数据库的备份和恢复.html.f4b612cc.js"><link rel="prefetch" href="/assets/MyCat学习.html.5fd1cd14.js"><link rel="prefetch" href="/assets/双主高可用实现负载均衡.html.17b55feb.js"><link rel="prefetch" href="/assets/安装Percona数据库.html.c588eae9.js"><link rel="prefetch" href="/assets/番外.html.9f5cb0f2.js"><link rel="prefetch" href="/assets/Java环境变量配置.html.d4a27ac2.js"><link rel="prefetch" href="/assets/Lambda表达式.html.dba2184e.js"><link rel="prefetch" href="/assets/垃圾回收GC.html.99b5409e.js"><link rel="prefetch" href="/assets/8-17新特性API.html.b23d9a9b.js"><link rel="prefetch" href="/assets/Java10新特性.html.97eb01e2.js"><link rel="prefetch" href="/assets/Java8新特性-Optional.html.37625146.js"><link rel="prefetch" href="/assets/Java8新特性-Stream流式编程.html.00d4be70.js"><link rel="prefetch" href="/assets/Java8新特性-时间类.html.2f925532.js"><link rel="prefetch" href="/assets/Java9新特性.html.bf8818e4.js"><link rel="prefetch" href="/assets/Java并发编程-AQS并发容器同步组件.html.51db2c96.js"><link rel="prefetch" href="/assets/Java线程池.html.ba5e7be1.js"><link rel="prefetch" href="/assets/实现线程的几种方式.html.fe2d808c.js"><link rel="prefetch" href="/assets/指令重排.html.d9439df1.js"><link rel="prefetch" href="/assets/等待唤醒机制.html.017bdafa.js"><link rel="prefetch" href="/assets/线程基本概念.html.757469c1.js"><link rel="prefetch" href="/assets/线程安全.html.e1b26214.js"><link rel="prefetch" href="/assets/线程的生命周期.html.5614bef2.js"><link rel="prefetch" href="/assets/Docker命令说明.html.beba32c0.js"><link rel="prefetch" href="/assets/Docker安装.html.b71e702f.js"><link rel="prefetch" href="/assets/Docker安装Mysql.html.ebbbd647.js"><link rel="prefetch" href="/assets/Docker安装Nacos.html.9f6940f1.js"><link rel="prefetch" href="/assets/Docker安装Web管理平台.html.b15dedb0.js"><link rel="prefetch" href="/assets/Docker运行设置IP.html.d446c915.js"><link rel="prefetch" href="/assets/Docker部署haproxy.html.56c21947.js"><link rel="prefetch" href="/assets/Doker安装Redis.html.2bee4f08.js"><link rel="prefetch" href="/assets/Linux定时脚本.html.3fe35291.js"><link rel="prefetch" href="/assets/Linux问题归档.html.50567e3a.js"><link rel="prefetch" href="/assets/Ubuntu设置国内镜像软件源.html.936fd155.js"><link rel="prefetch" href="/assets/Ubuntu设置远程登陆.html.1a5ecc31.js"><link rel="prefetch" href="/assets/PigGo_图床.html.ff155a0c.js"><link rel="prefetch" href="/assets/WSL2使用文档.html.957f3fb4.js"><link rel="prefetch" href="/assets/Windows使用WSL2.html.6d188cdf.js"><link rel="prefetch" href="/assets/Hystrixs-断路由使用.html.32554b19.js"><link rel="prefetch" href="/assets/Spring-Gateway配置说明.html.317c443f.js"><link rel="prefetch" href="/assets/Loadbalancer负载均衡.html.4d817f71.js"><link rel="prefetch" href="/assets/Ribbon负载均衡服务.html.edf330d3.js"><link rel="prefetch" href="/assets/服务调用OpenFeign.html.2c46cec0.js"><link rel="prefetch" href="/assets/Seata分布式事务.html.481e8b4b.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动-消费异常处理机制.html.786b5aba.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动消息过滤的三种方式.html.02cd38df.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动配置.html.8238b711.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现事务消息(三).html.8de1dfbb.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现广播和顺序消息(一).html.c980ee80.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现延时消息(二).html.1b9c9767.js"><link rel="prefetch" href="/assets/Sleuth和Zipkin.html.a2f0b365.js"><link rel="prefetch" href="/assets/DDL数据库定义语言.html.e7c3eb9e.js"><link rel="prefetch" href="/assets/DML数据处理之增删改.html.47561dd6.js"><link rel="prefetch" href="/assets/SQL练习-01.html.3b5af471.js"><link rel="prefetch" href="/assets/分组函数.html.8473766a.js"><link rel="prefetch" href="/assets/分组查询.html.4dd2e6ab.js"><link rel="prefetch" href="/assets/分页查询.html.d1a872b9.js"><link rel="prefetch" href="/assets/单行函数.html.49d51dd7.js"><link rel="prefetch" href="/assets/基本查询.html.4815160a.js"><link rel="prefetch" href="/assets/排序查询.html.2db265d0.js"><link rel="prefetch" href="/assets/数据事务.html.c916bb27.js"><link rel="prefetch" href="/assets/数据库和SQL概述.html.0f673c1a.js"><link rel="prefetch" href="/assets/条件查询.html.9cdf8def.js"><link rel="prefetch" href="/assets/联合查询.html.9917791e.js"><link rel="prefetch" href="/assets/连接查询.html.b22a4de2.js"><link rel="prefetch" href="/assets/404.html.01fa9517.js"><link rel="prefetch" href="/assets/index.html.5836dbf6.js"><link rel="prefetch" href="/assets/随机数.html.3a815f5c.js"><link rel="prefetch" href="/assets/TypeScript学习.html.adbd8f1d.js"><link rel="prefetch" href="/assets/Spring Boot 使用 Junit5测试.html.e12cb97d.js"><link rel="prefetch" href="/assets/SpringBoot使用Log4j2日志框架.html.ec9f8897.js"><link rel="prefetch" href="/assets/SpringBoot多样化构建Docker.html.758e3dcb.js"><link rel="prefetch" href="/assets/SpringBoot拦截器.html.321a2949.js"><link rel="prefetch" href="/assets/SpringBoot注解.html.8ca4a871.js"><link rel="prefetch" href="/assets/SpringBoot项目Jar方式运行.html.ab0a01da.js"><link rel="prefetch" href="/assets/helloworld.html.44762b40.js"><link rel="prefetch" href="/assets/图形监控-Spring-Boot-Admin.html.8d4ca6ca.js"><link rel="prefetch" href="/assets/监控应用Spring-Boot-Actuator.html.5a40f374.js"><link rel="prefetch" href="/assets/错误处理.html.ab07afd8.js"><link rel="prefetch" href="/assets/MySql数据库相关概念.html.3b9e3bf3.js"><link rel="prefetch" href="/assets/Mysql查询优化-数据库优化.html.a6bbc83b.js"><link rel="prefetch" href="/assets/Mysql查询优化-语句优化.html.7d093d44.js"><link rel="prefetch" href="/assets/Mysql核心-索引.html.577b06a8.js"><link rel="prefetch" href="/assets/Mysql核心-视图.html.ec7b22f4.js"><link rel="prefetch" href="/assets/Mysql项目-新零售数据库设计.html.0307ce1d.js"><link rel="prefetch" href="/assets/Mysql项目-程序设计.html.d9827e01.js"><link rel="prefetch" href="/assets/PerconaTookit工具.html.1d426870.js"><link rel="prefetch" href="/assets/mysql数据日志.html.d62edff2.js"><link rel="prefetch" href="/assets/常用的Mysql命令.html.573bd433.js"><link rel="prefetch" href="/assets/数据库的备份和恢复.html.7574270e.js"><link rel="prefetch" href="/assets/MyCat学习.html.a4f01480.js"><link rel="prefetch" href="/assets/双主高可用实现负载均衡.html.e603c3de.js"><link rel="prefetch" href="/assets/安装Percona数据库.html.7d1d9ea9.js"><link rel="prefetch" href="/assets/番外.html.4669ca30.js"><link rel="prefetch" href="/assets/Java环境变量配置.html.94200dd4.js"><link rel="prefetch" href="/assets/Lambda表达式.html.e86ff6e4.js"><link rel="prefetch" href="/assets/垃圾回收GC.html.39db3df8.js"><link rel="prefetch" href="/assets/8-17新特性API.html.11150ca2.js"><link rel="prefetch" href="/assets/Java10新特性.html.5da7d147.js"><link rel="prefetch" href="/assets/Java8新特性-Optional.html.ea2715a6.js"><link rel="prefetch" href="/assets/Java8新特性-Stream流式编程.html.ab89bcd5.js"><link rel="prefetch" href="/assets/Java8新特性-时间类.html.a0f829e5.js"><link rel="prefetch" href="/assets/Java9新特性.html.bcbd2596.js"><link rel="prefetch" href="/assets/Java并发编程-AQS并发容器同步组件.html.28d60a64.js"><link rel="prefetch" href="/assets/Java线程池.html.9a838964.js"><link rel="prefetch" href="/assets/实现线程的几种方式.html.6d97db33.js"><link rel="prefetch" href="/assets/指令重排.html.c0f655d4.js"><link rel="prefetch" href="/assets/等待唤醒机制.html.32bee595.js"><link rel="prefetch" href="/assets/线程基本概念.html.285fe513.js"><link rel="prefetch" href="/assets/线程安全.html.9e70119f.js"><link rel="prefetch" href="/assets/线程的生命周期.html.54b9a36a.js"><link rel="prefetch" href="/assets/Docker命令说明.html.10a35eb1.js"><link rel="prefetch" href="/assets/Docker安装.html.9b72fbaf.js"><link rel="prefetch" href="/assets/Docker安装Mysql.html.8e9dcc3d.js"><link rel="prefetch" href="/assets/Docker安装Nacos.html.0c7066c8.js"><link rel="prefetch" href="/assets/Docker安装Web管理平台.html.16b66a1e.js"><link rel="prefetch" href="/assets/Docker运行设置IP.html.e399fc36.js"><link rel="prefetch" href="/assets/Docker部署haproxy.html.30c338c9.js"><link rel="prefetch" href="/assets/Doker安装Redis.html.e01811d9.js"><link rel="prefetch" href="/assets/Linux定时脚本.html.0773130e.js"><link rel="prefetch" href="/assets/Linux问题归档.html.836078cf.js"><link rel="prefetch" href="/assets/Ubuntu设置国内镜像软件源.html.36089e7f.js"><link rel="prefetch" href="/assets/Ubuntu设置远程登陆.html.989392fb.js"><link rel="prefetch" href="/assets/PigGo_图床.html.7c94cd32.js"><link rel="prefetch" href="/assets/WSL2使用文档.html.17f7d9b8.js"><link rel="prefetch" href="/assets/Windows使用WSL2.html.6a552282.js"><link rel="prefetch" href="/assets/Hystrixs-断路由使用.html.e43be0b5.js"><link rel="prefetch" href="/assets/Spring-Gateway配置说明.html.77da2095.js"><link rel="prefetch" href="/assets/Loadbalancer负载均衡.html.3a0a3ad7.js"><link rel="prefetch" href="/assets/Ribbon负载均衡服务.html.7d2b1290.js"><link rel="prefetch" href="/assets/服务调用OpenFeign.html.937ef2d2.js"><link rel="prefetch" href="/assets/Seata分布式事务.html.c4acbc31.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动-消费异常处理机制.html.6aa10f8f.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动消息过滤的三种方式.html.419c75d5.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动配置.html.82681e2a.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现事务消息(三).html.9f32a439.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现广播和顺序消息(一).html.cd050fc9.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现延时消息(二).html.bf43339a.js"><link rel="prefetch" href="/assets/Sleuth和Zipkin.html.1847a36b.js"><link rel="prefetch" href="/assets/DDL数据库定义语言.html.a1b0f725.js"><link rel="prefetch" href="/assets/DML数据处理之增删改.html.4cdfca73.js"><link rel="prefetch" href="/assets/SQL练习-01.html.77d68c39.js"><link rel="prefetch" href="/assets/分组函数.html.cb093a68.js"><link rel="prefetch" href="/assets/分组查询.html.d18eada3.js"><link rel="prefetch" href="/assets/分页查询.html.f56764e6.js"><link rel="prefetch" href="/assets/单行函数.html.deb9ae79.js"><link rel="prefetch" href="/assets/基本查询.html.8310c45c.js"><link rel="prefetch" href="/assets/排序查询.html.d998eca8.js"><link rel="prefetch" href="/assets/数据事务.html.ab27f45c.js"><link rel="prefetch" href="/assets/数据库和SQL概述.html.5ae239f0.js"><link rel="prefetch" href="/assets/条件查询.html.f14c61c1.js"><link rel="prefetch" href="/assets/联合查询.html.d8a5248d.js"><link rel="prefetch" href="/assets/连接查询.html.a0959fc2.js"><link rel="prefetch" href="/assets/404.html.9b9bf036.js"><link rel="prefetch" href="/assets/404.1cfa2fc0.js"><link rel="prefetch" href="/assets/Layout.ce6856c3.js">
    <link rel="stylesheet" href="/assets/style.811e635c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/png/logo.png" alt="青衣水袖"><span class="site-name can-hide">青衣水袖</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/newApi/8-17新特性API.html" class="" aria-label="Java 版本特性"><!--[--><!--]--> Java 版本特性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/base/Java环境变量配置.html" class="" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/thread/线程基本概念.html" class="" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring 系列</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/backend/springboot/helloworld.html" class="" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud Alibaba"><!--[--><!--]--> Spring Cloud Alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/base/数据库和SQL概述.html" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/pxc/安装Percona数据库.html" class="" aria-label="Percona Xtradb Cluster"><!--[--><!--]--> Percona Xtradb Cluster <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/linux/Ubuntu设置国内镜像软件源.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker/Docker安装.html" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/mix/PigGo+图床.html" class="" aria-label="杂项"><!--[--><!--]--> 杂项 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/TypeScript学习.html" class="" aria-label="TypeScript学习"><!--[--><!--]--> TypeScript学习 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/moomhub/Notes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/newApi/8-17新特性API.html" class="" aria-label="Java 版本特性"><!--[--><!--]--> Java 版本特性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/base/Java环境变量配置.html" class="" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/thread/线程基本概念.html" class="" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring 系列</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/backend/springboot/helloworld.html" class="" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud Alibaba"><!--[--><!--]--> Spring Cloud Alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/base/数据库和SQL概述.html" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/pxc/安装Percona数据库.html" class="" aria-label="Percona Xtradb Cluster"><!--[--><!--]--> Percona Xtradb Cluster <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/linux/Ubuntu设置国内镜像软件源.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker/Docker安装.html" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/mix/PigGo+图床.html" class="" aria-label="杂项"><!--[--><!--]--> 杂项 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/TypeScript学习.html" class="" aria-label="TypeScript学习"><!--[--><!--]--> TypeScript学习 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/moomhub/Notes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Percona Xtradb Cluster <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/database/pxc/%E5%AE%89%E8%A3%85Percona%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="sidebar-item" aria-label="安装Percona数据库"><!--[--><!--]--> 安装Percona数据库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="PXC 集群安装"><!--[--><!--]--> PXC 集群安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_1、linux-主机安装" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、Linux 主机安装"><!--[--><!--]--> 1、Linux 主机安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_1-删除-mariadb-程序包" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 删除 MariaDB 程序包"><!--[--><!--]--> 1. 删除 MariaDB 程序包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_2-开放防火墙端口" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 开放防火墙端口"><!--[--><!--]--> 2. 开放防火墙端口 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_3-关闭-selinux" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 关闭 SELINUX"><!--[--><!--]--> 3. 关闭 SELINUX <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_4-离线安装-pxc" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 离线安装 PXC"><!--[--><!--]--> 4. 离线安装 PXC <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_5-创建-pxc-集群" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 创建 PXC 集群"><!--[--><!--]--> 5. 创建 PXC 集群 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_6-pxc-节点启动与关闭" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. PXC 节点启动与关闭"><!--[--><!--]--> 6. PXC 节点启动与关闭 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_2、docker-安装" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、Docker 安装"><!--[--><!--]--> 2、Docker 安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_1-拉取镜像" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.拉取镜像"><!--[--><!--]--> 1.拉取镜像 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_2-直接启动版-傻瓜操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.直接启动版（傻瓜操作）"><!--[--><!--]--> 2.直接启动版（傻瓜操作） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_3-挂载配置文件版-推荐-5-7-30-版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.挂载配置文件版（推荐）5.7 .30 版本"><!--[--><!--]--> 3.挂载配置文件版（推荐）5.7 .30 版本 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_3、pxc-参数说明" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、PXC 参数说明"><!--[--><!--]--> 3、PXC 参数说明 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_4、pxc-节点上线和下线操作-安装环境下" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、PXC 节点上线和下线操作（安装环境下）"><!--[--><!--]--> 4、PXC 节点上线和下线操作（安装环境下） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/database/pxc/PXC%E9%9B%86%E7%BE%A4%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85.html#_5、mysql-常用的中间件" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、Mysql 常用的中间件"><!--[--><!--]--> 5、Mysql 常用的中间件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">MyCat 数据库中间件 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/database/pxc/MyCat%E5%AD%A6%E4%B9%A0.html" class="sidebar-item" aria-label="MyCat 学习"><!--[--><!--]--> MyCat 学习 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">高可用集群 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/database/pxc/%E5%8F%8C%E4%B8%BB%E9%AB%98%E5%8F%AF%E7%94%A8%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html" class="sidebar-item" aria-label="/database/pxc/双主高可用实现负载均衡.md"><!--[--><!--]--> /database/pxc/双主高可用实现负载均衡.md <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">番外 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/database/pxc/%E7%95%AA%E5%A4%96.html" class="sidebar-item" aria-label="番外"><!--[--><!--]--> 番外 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="pxc-集群安装" tabindex="-1"><a class="header-anchor" href="#pxc-集群安装" aria-hidden="true">#</a> PXC 集群安装</h1><blockquote><p>PXC 是基于 Percona 而来的</p><p>PXC 集群只支持 InnoDB 引擎只有 InnoDB 引擎的数据才会被同步</p></blockquote><p><strong>PXC 集群要使用四个端口,所以防火墙要放行这些端口端口描述</strong></p><table><thead><tr><th style="text-align:center;">端口</th><th style="text-align:center;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">3306</td><td style="text-align:center;">MySQL 服务端口</td></tr><tr><td style="text-align:center;">4444</td><td style="text-align:center;">请求全量同步(SST)端口</td></tr><tr><td style="text-align:center;">4567</td><td style="text-align:center;">数据库节点之间通信端口</td></tr><tr><td style="text-align:center;">4568</td><td style="text-align:center;">请求增量同步(IST)端口</td></tr></tbody></table><h2 id="_1、linux-主机安装" tabindex="-1"><a class="header-anchor" href="#_1、linux-主机安装" aria-hidden="true">#</a> 1、Linux 主机安装</h2><h3 id="_1-删除-mariadb-程序包" tabindex="-1"><a class="header-anchor" href="#_1-删除-mariadb-程序包" aria-hidden="true">#</a> 1. 删除 MariaDB 程序包</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y remove mari*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-开放防火墙端口" tabindex="-1"><a class="header-anchor" href="#_2-开放防火墙端口" aria-hidden="true">#</a> 2. 开放防火墙端口</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">4444</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">4567</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">4568</span>/tcp --permanent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-关闭-selinux" tabindex="-1"><a class="header-anchor" href="#_3-关闭-selinux" aria-hidden="true">#</a> 3. 关闭 SELINUX</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vi</span> /etc/selinux/config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>把 SELINUX 属性值设置成 disabled</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-离线安装-pxc" tabindex="-1"><a class="header-anchor" href="#_4-离线安装-pxc" aria-hidden="true">#</a> 4. 离线安装 PXC</h3><ul><li><p>进入 RPM 文件目录，执行安装命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum localinstall *.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>参考第一章内容，修改 MySQL 配置文件、创建账户等操作</p></li></ul><h3 id="_5-创建-pxc-集群" tabindex="-1"><a class="header-anchor" href="#_5-创建-pxc-集群" aria-hidden="true">#</a> 5. 创建 PXC 集群</h3><ul><li><p>停止 MySQL 服务</p></li><li><p>修改每个 PXC 节点的/etc/my.cnf 文件（在不同节点上，注意调整文件内容）</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">server-id</span><span class="token punctuation">=</span><span class="token value attr-value">1  #PXC集群中MySQL实例的唯一ID，不能重复，必须是数字</span>
<span class="token key attr-name">wsrep_provider</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/lib64/galera3/libgalera_smm.so</span>
<span class="token key attr-name">wsrep_cluster_name</span><span class="token punctuation">=</span><span class="token value attr-value">pxc-cluster  #PXC集群的名称</span>
<span class="token key attr-name">wsrep_cluster_address</span><span class="token punctuation">=</span><span class="token value attr-value">gcomm://192.168.99.151,192.168.99.159,192.168.99.215</span>
<span class="token key attr-name">wsrep_node_name</span><span class="token punctuation">=</span><span class="token value attr-value">pxc1  #当前节点的名称</span>
<span class="token key attr-name">wsrep_node_address</span><span class="token punctuation">=</span><span class="token value attr-value">192.168.99.151  #当前节点的IP</span>
<span class="token key attr-name">wsrep_sst_method</span><span class="token punctuation">=</span><span class="token value attr-value">xtrabackup-v2  #同步方法（mysqldump、rsync、xtrabackup）</span>
<span class="token key attr-name">wsrep_sst_auth</span><span class="token punctuation">=</span> <span class="token value attr-value">admin:Abc_123456  #同步使用的帐户</span>
<span class="token key attr-name">pxc_strict_mode</span><span class="token punctuation">=</span><span class="token value attr-value">ENFORCING  #同步严厉模式</span>
<span class="token key attr-name">binlog_format</span><span class="token punctuation">=</span><span class="token value attr-value">ROW  #基于ROW复制（安全可靠）</span>
<span class="token key attr-name">default_storage_engine</span><span class="token punctuation">=</span><span class="token value attr-value">InnoDB  #默认引擎</span>
<span class="token key attr-name">innodb_autoinc_lock_mode</span><span class="token punctuation">=</span><span class="token value attr-value">2  #主键自增长不锁表</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>主节点的管理命令（第一个启动的 PXC 节点）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start mysql@bootstrap.service
systemctl stop mysql@bootstrap.service
systemctl restart mysql@bootstrap.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>非主节点的管理命令（非第一个启动的 PXC 节点）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> start mysql
<span class="token function">service</span> stop mysql
<span class="token function">service</span> restart mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>查看 PXC 集群状态信息</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show status like &#39;wsrep_cluster%&#39; ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>按照上述配置方法，创建两组 PXC 集群</strong></p></li></ul><h3 id="_6-pxc-节点启动与关闭" tabindex="-1"><a class="header-anchor" href="#_6-pxc-节点启动与关闭" aria-hidden="true">#</a> 6. PXC 节点启动与关闭</h3><ul><li>如果最后关闭的 PXC 节点是安全退出的，那么下次启动要最先启动这个节点，而且要以主节点启动</li><li>如果最后关闭的 PXC 节点不是安全退出的，那么要先修改<code>/var/lib/mysql/grastate.dat</code> 文件，把其中的<code>safe_to_bootstrap</code>属性值设置为 1，再安装主节点启动</li></ul><h2 id="_2、docker-安装" tabindex="-1"><a class="header-anchor" href="#_2、docker-安装" aria-hidden="true">#</a> 2、Docker 安装</h2><h3 id="_1-拉取镜像" tabindex="-1"><a class="header-anchor" href="#_1-拉取镜像" aria-hidden="true">#</a> 1.拉取镜像</h3><p>在 docker 中选择你要拉取的镜像 https://registry.hub.docker.com/r/percona/percona-xtradb-cluster</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull percona/percona-xtradb-cluster:5.7.30-31.43
<span class="token function">docker</span> pull percona/percona-xtradb-cluster:8.0.19-10.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-直接启动版-傻瓜操作" tabindex="-1"><a class="header-anchor" href="#_2-直接启动版-傻瓜操作" aria-hidden="true">#</a> 2.直接启动版（傻瓜操作）</h3><p>名称解释</p><table><thead><tr><th>名称</th><th>解释</th></tr></thead><tbody><tr><td>MYSQL_ROOT_PASSWORD</td><td>数据库 root 密码</td></tr><tr><td>CLUSTER_NAME</td><td>集群名称</td></tr><tr><td>CLUSTER_JOIN</td><td>加入的节点</td></tr></tbody></table><blockquote><p>一定要先创建并开启节点 1 不然之后节点会报错</p></blockquote><p>直接按照顺序输入如下命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name pxc1 <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-e <span class="token assign-left variable">CLUSTER_NAME</span><span class="token operator">=</span>pxc-server <span class="token punctuation">\</span>
-p <span class="token number">3331</span>:3306 <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.11 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43

<span class="token function">docker</span> run -d --name pxc2 <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-e <span class="token assign-left variable">CLUSTER_NAME</span><span class="token operator">=</span>pxc-server <span class="token punctuation">\</span>
-e <span class="token assign-left variable">CLUSTER_JOIN</span><span class="token operator">=</span>pxc1 <span class="token punctuation">\</span>
-p <span class="token number">3322</span>:3306 <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.12 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43

<span class="token function">docker</span> run -d --name pxc3 <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-e <span class="token assign-left variable">CLUSTER_NAME</span><span class="token operator">=</span>pxc-server <span class="token punctuation">\</span>
-e <span class="token assign-left variable">CLUSTER_JOIN</span><span class="token operator">=</span>pxc1 <span class="token punctuation">\</span>
-p <span class="token number">3323</span>:3306 <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.13 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-挂载配置文件版-推荐-5-7-30-版本" tabindex="-1"><a class="header-anchor" href="#_3-挂载配置文件版-推荐-5-7-30-版本" aria-hidden="true">#</a> 3.挂载配置文件版（推荐）5.7 .30 版本</h3><p>新建三个 PXC 的目录用于存放相关的配置文件和数据</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建相关文件</span>
<span class="token function">mkdir</span> /opt/docker/pxc-server
<span class="token builtin class-name">cd</span> /opt/docker/pxc-server
<span class="token function">mkdir</span> pxc1 pxc2 pxc3
<span class="token function">mkdir</span> pxc1/mysql pxc2/mysql pxc3/mysql
<span class="token comment"># 创建配置文件 每一个都要不一样</span>
<span class="token function">vi</span> pxc1/my.cnf
<span class="token function">cp</span> /opt/docker/pxc-server/pxc1/my.cnf /opt/docker/pxc-server/pxc2/my.cnf
<span class="token function">cp</span> /opt/docker/pxc-server/pxc1/my.cnf /opt/docker/pxc-server/pxc3/my.cnf
<span class="token comment"># 修改文件夹权限</span>
<span class="token function">chmod</span> <span class="token number">777</span> /opt/docker/pxc-server/*
<span class="token function">chmod</span> <span class="token number">777</span> /opt/docker/pxc-server/pxc1/* /opt/docker/pxc-server/pxc2/* /opt/docker/pxc-server/pxc3/*
<span class="token function">chmod</span> <span class="token number">664</span> /opt/docker/pxc-server/pxc1/conf/my.cnf /opt/docker/pxc-server/pxc2/conf/my.cnf /opt/docker/pxc-server/pxc3/conf/my.cnf

<span class="token function">chmod</span> <span class="token number">664</span> /opt/docker/pxc-server/pxc1/my.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>my.cnf</strong>配置文件内容</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment"># default_authentication_plugin=mysql_native_password</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/var/lib/mysql
skip-host-cache
skip-name-resolve
core-file

<span class="token comment"># 默认字符集</span>
character_set_server <span class="token operator">=</span> utf8
bind_address <span class="token operator">=</span> <span class="token number">0.0</span>.0.0

<span class="token assign-left variable">default_storage_engine</span><span class="token operator">=</span>InnoDB
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>ROW
skip-host-cache
core-file
<span class="token comment"># 日志保存天数</span>
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>
<span class="token comment">#Disabling symbolic-links is recommended to porevent assorted security risks</span>
symbolic-links<span class="token operator">=</span><span class="token number">0</span>

innodb_flush_log_at_trx_commit  <span class="token operator">=</span> <span class="token number">0</span>
innodb_flush_method             <span class="token operator">=</span> O_DIRECT
innodb_file_per_table           <span class="token operator">=</span> <span class="token number">1</span>
<span class="token assign-left variable">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span>

<span class="token comment">#配置文件中PXC相关内容</span>
server-id<span class="token operator">=</span><span class="token number">1</span> <span class="token comment">#PXC集群中MySQL实例的唯一ID，不能重复，必须是数字</span>
<span class="token assign-left variable">wsrep_slave_threads</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">wsrep_node_incoming_address</span><span class="token operator">=</span><span class="token number">172.18</span>.0.11:3306
<span class="token assign-left variable">wsrep_provider</span><span class="token operator">=</span>/usr/lib64/galera3/libgalera_smm.so
<span class="token assign-left variable">wsrep_cluster_name</span><span class="token operator">=</span>pxc-server <span class="token comment">#PXC集群的名称</span>
<span class="token assign-left variable">wsrep_cluster_address</span><span class="token operator">=</span>gcomm://172.18.0.11,172.18.0.12,172.18.0.13
<span class="token assign-left variable">wsrep_node_name</span><span class="token operator">=</span>pxc1<span class="token comment">#当前节点的名称</span>
<span class="token assign-left variable">wsrep_node_address</span><span class="token operator">=</span><span class="token number">172.18</span>.0.11<span class="token comment">#当前节点的IP</span>
<span class="token assign-left variable">wsrep_sst_method</span><span class="token operator">=</span>xtrabackup-v2<span class="token comment">#同步方法(mysqldump、rsync、xtrabackup)</span>
<span class="token assign-left variable">wsrep_sst_auth</span><span class="token operator">=</span> root:123456 <span class="token comment">#同步使用的帐户</span>
<span class="token assign-left variable">pxc_strict_mode</span><span class="token operator">=</span>ENFORCING <span class="token comment">#同步严厉模式</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>ROW <span class="token comment">#基于ROW复制(安全可靠)</span>
<span class="token assign-left variable">default_storage_engine</span><span class="token operator">=</span>InnoDB <span class="token comment">#默认引擎</span>
<span class="token assign-left variable">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span> <span class="token comment">#主键自增长不锁表</span>
<span class="token comment"># 这个只是在导入数据时使用</span>
<span class="token assign-left variable">innodb_flush_log_at_trx_commit</span><span class="token operator">=</span> <span class="token number">0</span>
<span class="token assign-left variable">innodb_flush_method</span><span class="token operator">=</span> O_DIRECT
<span class="token assign-left variable">innodb_buffer_pool_size</span><span class="token operator">=</span> 200M

<span class="token comment"># 禁用 ssl mysql  8 中开启</span>
<span class="token comment"># pxc-encrypt-cluster-traffic=OFF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行 docker 容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name pxc1 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc1/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc1/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3310</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.10 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43

<span class="token function">docker</span> run -d --name pxc1 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc1/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc1/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3311</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.11 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43

<span class="token function">docker</span> run -d --name pxc2 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc2/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc2/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3312</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.12 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43

<span class="token function">docker</span> run -d --name pxc3 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc3/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc3/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3313</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--restart<span class="token operator">=</span>always <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.13 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:5.7.30-31.43
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加完成或链接数据库输入以下命令 查看是否安装成功</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show status like &#39;wsrep_cluster%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token function">docker</span> run -d --name pxc1 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc1/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc1/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3311</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.11 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:8.0.19-10.1

<span class="token function">docker</span> run -d --name pxc2 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc2/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc2/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3312</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.12 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:8.0.19-10.1

<span class="token function">docker</span> run -d --name pxc3 <span class="token punctuation">\</span>
-v /opt/docker/pxc-server/pxc3/mysql:/var/lib/mysql <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/pxc-server/pxc3/my.cnf,dst<span class="token operator">=</span>/etc/my.cnf <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-p <span class="token number">3313</span>:3306 <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.13 <span class="token punctuation">\</span>
percona/percona-xtradb-cluster:8.0.19-10.1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件版</p><p>配置文件信息</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>

<span class="token assign-left variable">default_authentication_plugin</span><span class="token operator">=</span>mysql_native_password
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/var/lib/mysql
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/tmp/mysql.sock
skip-host-cache
skip-name-resolve
core-file

character_set_server <span class="token operator">=</span> utf8
bind_address <span class="token operator">=</span> <span class="token number">0.0</span>.0.0

<span class="token assign-left variable">default_storage_engine</span><span class="token operator">=</span>InnoDB
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>ROW


<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>
<span class="token comment">#Disabling symbolic-links is recommended to porevent assorted security risks</span>
symbolic-links<span class="token operator">=</span><span class="token number">0</span>

innodb_flush_log_at_trx_commit  <span class="token operator">=</span> <span class="token number">0</span>
innodb_flush_method             <span class="token operator">=</span> O_DIRECT
innodb_file_per_table           <span class="token operator">=</span> <span class="token number">1</span>
<span class="token assign-left variable">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span>

<span class="token comment">#配置文件中PXC相关内容</span>
server-id<span class="token operator">=</span><span class="token number">1</span> <span class="token comment">#PXC集群中MySQL实例的唯一ID，不能重复，必须是数字</span>
<span class="token assign-left variable">wsrep_slave_threads</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">wsrep_node_incoming_address</span><span class="token operator">=</span><span class="token number">172.18</span>.0.11:3306
<span class="token assign-left variable">wsrep_provider</span><span class="token operator">=</span>/usr/lib64/galera4/libgalera_smm.so
<span class="token assign-left variable">wsrep_cluster_name</span><span class="token operator">=</span>pxc-server <span class="token comment">#PXC集群的名称</span>
<span class="token assign-left variable">wsrep_cluster_address</span><span class="token operator">=</span>gcomm://
<span class="token assign-left variable">wsrep_node_name</span><span class="token operator">=</span>test1<span class="token comment">#当前节点的名称</span>
<span class="token assign-left variable">wsrep_node_address</span><span class="token operator">=</span><span class="token number">172.18</span>.0.11<span class="token comment">#当前节点的IP</span>
<span class="token assign-left variable">wsrep_sst_method</span><span class="token operator">=</span>xtrabackup-v2<span class="token comment">#同步方法(mysqldump、rsync、xtrabackup)</span>
<span class="token assign-left variable">pxc_strict_mode</span><span class="token operator">=</span>ENFORCING <span class="token comment">#同步严厉模式</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>ROW <span class="token comment">#基于ROW复制(安全可靠)</span>
<span class="token assign-left variable">default_storage_engine</span><span class="token operator">=</span>InnoDB <span class="token comment">#默认引擎</span>
<span class="token assign-left variable">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span> <span class="token comment">#主键自增长不锁表</span>
<span class="token comment"># 这个只是在导入数据时使用</span>
<span class="token assign-left variable">innodb_flush_log_at_trx_commit</span><span class="token operator">=</span> <span class="token number">0</span>
<span class="token assign-left variable">innodb_flush_method</span><span class="token operator">=</span> O_DIRECT
<span class="token assign-left variable">innodb_buffer_pool_size</span><span class="token operator">=</span> 200M

pxc-encrypt-cluster-traffic<span class="token operator">=</span>OFF

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/tmp/mysql.sock

<span class="token punctuation">[</span>sst<span class="token punctuation">]</span>
<span class="token assign-left variable">progress</span><span class="token operator">=</span>/var/lib/mysql/sst_in_progresss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PXC 集群管理</p><p>PXC 集群信息</p><p>PXC 集群信息可以分为以下几类:</p><p>队列 复制 流控 事物 状态 https://www.percona.com/doc/percona-xtradb-cluster/LATEST/wsrep-status-index.html</p><h2 id="_3、pxc-参数说明" tabindex="-1"><a class="header-anchor" href="#_3、pxc-参数说明" aria-hidden="true">#</a> 3、PXC 参数说明</h2><p>PXC 数据复制相关的信息</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>wsrep_last_applied</td><td>同步应用次数</td></tr><tr><td>wsrep_last_committed</td><td>事物提交次数</td></tr><tr><td>wsrep_replicated</td><td>被其他节点复制的总数</td></tr><tr><td>wsrep_replicated_bytes</td><td>被其他节点复制的数据总数</td></tr><tr><td>wsrep_received</td><td>从其他节点处收到的写入请求总数</td></tr><tr><td>wsrep_received_bytes</td><td>从其他节点处收到的同步数据总数</td></tr></tbody></table><p>PXC 队列的相关信息</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><strong>wsrep_local_send_queue</strong></td><td>发送队列的长度</td></tr><tr><td>wsrep_local_send_queue_max</td><td>发送队列的最大长度</td></tr><tr><td>wsrep_local_send_queue_min</td><td>发送队列的最小长度</td></tr><tr><td><strong>wsrep_local_send_queue_avg</strong></td><td>发送队列的平均长度</td></tr><tr><td><strong>wsrep_local_recv_queue</strong></td><td>接收队列的长度</td></tr><tr><td>wsrep_local_recv_queue_max</td><td>接收队列的最大长度</td></tr><tr><td>wsrep_local_recv_queue_min</td><td>接收队列的最小长度</td></tr><tr><td><strong>wsrep_local_recv_queue_avg</strong></td><td>接收队列的平均长度</td></tr></tbody></table><p>流量控制的相关信息</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>wsrep_flow_control_paused_ns</td><td>流控暂停状态下花费的总时间（纳秒)</td></tr><tr><td><strong>wsrep_flow_control_paused</strong></td><td>流量控制暂停时间的占比(0~1)</td></tr><tr><td><strong>wsrep_flow_control_sent</strong></td><td>发送的流控暂停事件的数量</td></tr><tr><td><strong>wsrep_flow_control_recv</strong></td><td>接收的流控暂停事件的数量</td></tr><tr><td>wsrep_flow_control_interval</td><td>流量控制的下限和上限。上限是队列中允许的最大请求数。如果队列达到上限，则拒绝新的请求。当处理现有请求时，队列会减少，—旦到达下限，将再次允许新的请求</td></tr><tr><td><strong>wsrep_flow_control_status</strong></td><td>流量控制状态</td></tr></tbody></table><p>PXC 状态管理</p><p>PXC 节点状态</p><p><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/Fl1VTmzCt7EePHJ.png" alt="image-20200922155642505"></p><p>PXC 集群状态</p><p><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/85Z6MenauvrlJtY.png" alt="image-20200922155721122"></p><p>节点与集群的相关信息</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>wsrep_local_state_comment</td><td>节点状态</td></tr><tr><td>wsrep_cluster_status</td><td>集群状态(PRIMARY（正常状态）、NON_PRIMARY（脑裂）、Disconnected（未连接）)</td></tr><tr><td>wsrep_connected</td><td>节点是否连接到集群</td></tr><tr><td>wsrep_ready</td><td>集群是否正常工作</td></tr><tr><td>wsrep_cluster_size</td><td>节点数量</td></tr><tr><td>wsrep_desync_count</td><td>延时节点数量</td></tr><tr><td>wsrep_incoming_addresses</td><td>集群节点 IP 地址</td></tr></tbody></table><p>事务的相关信息</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>wsrep_cert_deps_distance</td><td>事务执行并发数</td></tr><tr><td>wsrep_apply_oooe</td><td>接收队列中事务的占比</td></tr><tr><td>wsrep_apply_oool</td><td>接收队列中事务乱序执行的频率</td></tr><tr><td>wsrep_apply_window</td><td>接收队列中事务的平均数量</td></tr><tr><td>wsrep_commit_oooe</td><td>发送队列中事务的占比</td></tr><tr><td>wsrep_commit_oool</td><td>无任何意义(不存在本地乱序提交)</td></tr><tr><td>wsrep_commit_window</td><td>发送队列中事务的平均数量</td></tr></tbody></table><h2 id="_4、pxc-节点上线和下线操作-安装环境下" tabindex="-1"><a class="header-anchor" href="#_4、pxc-节点上线和下线操作-安装环境下" aria-hidden="true">#</a> 4、PXC 节点上线和下线操作（安装环境下）</h2><p>如果 PXC 节点都是安全退出的，先要启动最后退出的节点</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 最后关闭的节点先启动</span>
systemctl start mysql@bootstrap.service
<span class="token comment"># 查看节点是否是最后一个节点  pxc的安装目录</span>
<span class="token function">cat</span> /var/lib/mysql/grastate.dat


<span class="token comment">#  safe_to_bootstrap(默认是0,为1则代表是最后一个节点结束的）</span>

safe_to_bootstrap: <span class="token number">1</span> 设置为1 <span class="token punctuation">(</span>默认是0）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5、mysql-常用的中间件" tabindex="-1"><a class="header-anchor" href="#_5、mysql-常用的中间件" aria-hidden="true">#</a> 5、Mysql 常用的中间件</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>MyCat （推荐）
Atlas
OneProxy
Proxy SQL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/moomhub/Notes/edit/main/docs/database/pxc/PXC集群主机安装.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2208300539@qq.com">MoomHub</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/database/pxc/%E5%AE%89%E8%A3%85Percona%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="" aria-label="安装Percona数据库"><!--[--><!--]--> 安装Percona数据库 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4a9c1875.js" defer></script>
  </body>
</html>
