<!DOCTYPE html>
<html lang="en-Zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/icon/favicon.ico"><meta name="application-name" content="MoomHub"><meta name="apple-mobile-web-app-title" content="MoomHub"><title>Docker 安装 mysql | 青衣水袖</title><meta name="description" content="记录学习信息的文档">
    <link rel="modulepreload" href="/assets/app.4a9c1875.js"><link rel="modulepreload" href="/assets/Docker安装Mysql.html.8e9dcc3d.js"><link rel="modulepreload" href="/assets/Docker安装Mysql.html.ebbbd647.js"><link rel="prefetch" href="/assets/index.html.468fd202.js"><link rel="prefetch" href="/assets/随机数.html.e3d01a1e.js"><link rel="prefetch" href="/assets/TypeScript学习.html.6baf459a.js"><link rel="prefetch" href="/assets/Spring Boot 使用 Junit5测试.html.296e78aa.js"><link rel="prefetch" href="/assets/SpringBoot使用Log4j2日志框架.html.634eba63.js"><link rel="prefetch" href="/assets/SpringBoot多样化构建Docker.html.afab33b2.js"><link rel="prefetch" href="/assets/SpringBoot拦截器.html.84a45392.js"><link rel="prefetch" href="/assets/SpringBoot注解.html.c6e774de.js"><link rel="prefetch" href="/assets/SpringBoot项目Jar方式运行.html.f02763cf.js"><link rel="prefetch" href="/assets/helloworld.html.862da223.js"><link rel="prefetch" href="/assets/图形监控-Spring-Boot-Admin.html.ac745cbd.js"><link rel="prefetch" href="/assets/监控应用Spring-Boot-Actuator.html.a2cbd6f3.js"><link rel="prefetch" href="/assets/错误处理.html.bca399f9.js"><link rel="prefetch" href="/assets/MySql数据库相关概念.html.61316e19.js"><link rel="prefetch" href="/assets/Mysql查询优化-数据库优化.html.ddeac2f8.js"><link rel="prefetch" href="/assets/Mysql查询优化-语句优化.html.c1da6748.js"><link rel="prefetch" href="/assets/Mysql核心-索引.html.a83e5866.js"><link rel="prefetch" href="/assets/Mysql核心-视图.html.a1dbc1f1.js"><link rel="prefetch" href="/assets/Mysql项目-新零售数据库设计.html.1eb8a63b.js"><link rel="prefetch" href="/assets/Mysql项目-程序设计.html.f07fd66b.js"><link rel="prefetch" href="/assets/PerconaTookit工具.html.b175ecb8.js"><link rel="prefetch" href="/assets/mysql数据日志.html.f937338f.js"><link rel="prefetch" href="/assets/常用的Mysql命令.html.30719a11.js"><link rel="prefetch" href="/assets/数据库的备份和恢复.html.f4b612cc.js"><link rel="prefetch" href="/assets/MyCat学习.html.5fd1cd14.js"><link rel="prefetch" href="/assets/PXC集群主机安装.html.37e2d4fb.js"><link rel="prefetch" href="/assets/双主高可用实现负载均衡.html.17b55feb.js"><link rel="prefetch" href="/assets/安装Percona数据库.html.c588eae9.js"><link rel="prefetch" href="/assets/番外.html.9f5cb0f2.js"><link rel="prefetch" href="/assets/Java环境变量配置.html.d4a27ac2.js"><link rel="prefetch" href="/assets/Lambda表达式.html.dba2184e.js"><link rel="prefetch" href="/assets/垃圾回收GC.html.99b5409e.js"><link rel="prefetch" href="/assets/8-17新特性API.html.b23d9a9b.js"><link rel="prefetch" href="/assets/Java10新特性.html.97eb01e2.js"><link rel="prefetch" href="/assets/Java8新特性-Optional.html.37625146.js"><link rel="prefetch" href="/assets/Java8新特性-Stream流式编程.html.00d4be70.js"><link rel="prefetch" href="/assets/Java8新特性-时间类.html.2f925532.js"><link rel="prefetch" href="/assets/Java9新特性.html.bf8818e4.js"><link rel="prefetch" href="/assets/Java并发编程-AQS并发容器同步组件.html.51db2c96.js"><link rel="prefetch" href="/assets/Java线程池.html.ba5e7be1.js"><link rel="prefetch" href="/assets/实现线程的几种方式.html.fe2d808c.js"><link rel="prefetch" href="/assets/指令重排.html.d9439df1.js"><link rel="prefetch" href="/assets/等待唤醒机制.html.017bdafa.js"><link rel="prefetch" href="/assets/线程基本概念.html.757469c1.js"><link rel="prefetch" href="/assets/线程安全.html.e1b26214.js"><link rel="prefetch" href="/assets/线程的生命周期.html.5614bef2.js"><link rel="prefetch" href="/assets/Docker命令说明.html.beba32c0.js"><link rel="prefetch" href="/assets/Docker安装.html.b71e702f.js"><link rel="prefetch" href="/assets/Docker安装Nacos.html.9f6940f1.js"><link rel="prefetch" href="/assets/Docker安装Web管理平台.html.b15dedb0.js"><link rel="prefetch" href="/assets/Docker运行设置IP.html.d446c915.js"><link rel="prefetch" href="/assets/Docker部署haproxy.html.56c21947.js"><link rel="prefetch" href="/assets/Doker安装Redis.html.2bee4f08.js"><link rel="prefetch" href="/assets/Linux定时脚本.html.3fe35291.js"><link rel="prefetch" href="/assets/Linux问题归档.html.50567e3a.js"><link rel="prefetch" href="/assets/Ubuntu设置国内镜像软件源.html.936fd155.js"><link rel="prefetch" href="/assets/Ubuntu设置远程登陆.html.1a5ecc31.js"><link rel="prefetch" href="/assets/PigGo_图床.html.ff155a0c.js"><link rel="prefetch" href="/assets/WSL2使用文档.html.957f3fb4.js"><link rel="prefetch" href="/assets/Windows使用WSL2.html.6d188cdf.js"><link rel="prefetch" href="/assets/Hystrixs-断路由使用.html.32554b19.js"><link rel="prefetch" href="/assets/Spring-Gateway配置说明.html.317c443f.js"><link rel="prefetch" href="/assets/Loadbalancer负载均衡.html.4d817f71.js"><link rel="prefetch" href="/assets/Ribbon负载均衡服务.html.edf330d3.js"><link rel="prefetch" href="/assets/服务调用OpenFeign.html.2c46cec0.js"><link rel="prefetch" href="/assets/Seata分布式事务.html.481e8b4b.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动-消费异常处理机制.html.786b5aba.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动消息过滤的三种方式.html.02cd38df.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动配置.html.8238b711.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现事务消息(三).html.8de1dfbb.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现广播和顺序消息(一).html.c980ee80.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现延时消息(二).html.1b9c9767.js"><link rel="prefetch" href="/assets/Sleuth和Zipkin.html.a2f0b365.js"><link rel="prefetch" href="/assets/DDL数据库定义语言.html.e7c3eb9e.js"><link rel="prefetch" href="/assets/DML数据处理之增删改.html.47561dd6.js"><link rel="prefetch" href="/assets/SQL练习-01.html.3b5af471.js"><link rel="prefetch" href="/assets/分组函数.html.8473766a.js"><link rel="prefetch" href="/assets/分组查询.html.4dd2e6ab.js"><link rel="prefetch" href="/assets/分页查询.html.d1a872b9.js"><link rel="prefetch" href="/assets/单行函数.html.49d51dd7.js"><link rel="prefetch" href="/assets/基本查询.html.4815160a.js"><link rel="prefetch" href="/assets/排序查询.html.2db265d0.js"><link rel="prefetch" href="/assets/数据事务.html.c916bb27.js"><link rel="prefetch" href="/assets/数据库和SQL概述.html.0f673c1a.js"><link rel="prefetch" href="/assets/条件查询.html.9cdf8def.js"><link rel="prefetch" href="/assets/联合查询.html.9917791e.js"><link rel="prefetch" href="/assets/连接查询.html.b22a4de2.js"><link rel="prefetch" href="/assets/404.html.01fa9517.js"><link rel="prefetch" href="/assets/index.html.5836dbf6.js"><link rel="prefetch" href="/assets/随机数.html.3a815f5c.js"><link rel="prefetch" href="/assets/TypeScript学习.html.adbd8f1d.js"><link rel="prefetch" href="/assets/Spring Boot 使用 Junit5测试.html.e12cb97d.js"><link rel="prefetch" href="/assets/SpringBoot使用Log4j2日志框架.html.ec9f8897.js"><link rel="prefetch" href="/assets/SpringBoot多样化构建Docker.html.758e3dcb.js"><link rel="prefetch" href="/assets/SpringBoot拦截器.html.321a2949.js"><link rel="prefetch" href="/assets/SpringBoot注解.html.8ca4a871.js"><link rel="prefetch" href="/assets/SpringBoot项目Jar方式运行.html.ab0a01da.js"><link rel="prefetch" href="/assets/helloworld.html.44762b40.js"><link rel="prefetch" href="/assets/图形监控-Spring-Boot-Admin.html.8d4ca6ca.js"><link rel="prefetch" href="/assets/监控应用Spring-Boot-Actuator.html.5a40f374.js"><link rel="prefetch" href="/assets/错误处理.html.ab07afd8.js"><link rel="prefetch" href="/assets/MySql数据库相关概念.html.3b9e3bf3.js"><link rel="prefetch" href="/assets/Mysql查询优化-数据库优化.html.a6bbc83b.js"><link rel="prefetch" href="/assets/Mysql查询优化-语句优化.html.7d093d44.js"><link rel="prefetch" href="/assets/Mysql核心-索引.html.577b06a8.js"><link rel="prefetch" href="/assets/Mysql核心-视图.html.ec7b22f4.js"><link rel="prefetch" href="/assets/Mysql项目-新零售数据库设计.html.0307ce1d.js"><link rel="prefetch" href="/assets/Mysql项目-程序设计.html.d9827e01.js"><link rel="prefetch" href="/assets/PerconaTookit工具.html.1d426870.js"><link rel="prefetch" href="/assets/mysql数据日志.html.d62edff2.js"><link rel="prefetch" href="/assets/常用的Mysql命令.html.573bd433.js"><link rel="prefetch" href="/assets/数据库的备份和恢复.html.7574270e.js"><link rel="prefetch" href="/assets/MyCat学习.html.a4f01480.js"><link rel="prefetch" href="/assets/PXC集群主机安装.html.04a9ffe0.js"><link rel="prefetch" href="/assets/双主高可用实现负载均衡.html.e603c3de.js"><link rel="prefetch" href="/assets/安装Percona数据库.html.7d1d9ea9.js"><link rel="prefetch" href="/assets/番外.html.4669ca30.js"><link rel="prefetch" href="/assets/Java环境变量配置.html.94200dd4.js"><link rel="prefetch" href="/assets/Lambda表达式.html.e86ff6e4.js"><link rel="prefetch" href="/assets/垃圾回收GC.html.39db3df8.js"><link rel="prefetch" href="/assets/8-17新特性API.html.11150ca2.js"><link rel="prefetch" href="/assets/Java10新特性.html.5da7d147.js"><link rel="prefetch" href="/assets/Java8新特性-Optional.html.ea2715a6.js"><link rel="prefetch" href="/assets/Java8新特性-Stream流式编程.html.ab89bcd5.js"><link rel="prefetch" href="/assets/Java8新特性-时间类.html.a0f829e5.js"><link rel="prefetch" href="/assets/Java9新特性.html.bcbd2596.js"><link rel="prefetch" href="/assets/Java并发编程-AQS并发容器同步组件.html.28d60a64.js"><link rel="prefetch" href="/assets/Java线程池.html.9a838964.js"><link rel="prefetch" href="/assets/实现线程的几种方式.html.6d97db33.js"><link rel="prefetch" href="/assets/指令重排.html.c0f655d4.js"><link rel="prefetch" href="/assets/等待唤醒机制.html.32bee595.js"><link rel="prefetch" href="/assets/线程基本概念.html.285fe513.js"><link rel="prefetch" href="/assets/线程安全.html.9e70119f.js"><link rel="prefetch" href="/assets/线程的生命周期.html.54b9a36a.js"><link rel="prefetch" href="/assets/Docker命令说明.html.10a35eb1.js"><link rel="prefetch" href="/assets/Docker安装.html.9b72fbaf.js"><link rel="prefetch" href="/assets/Docker安装Nacos.html.0c7066c8.js"><link rel="prefetch" href="/assets/Docker安装Web管理平台.html.16b66a1e.js"><link rel="prefetch" href="/assets/Docker运行设置IP.html.e399fc36.js"><link rel="prefetch" href="/assets/Docker部署haproxy.html.30c338c9.js"><link rel="prefetch" href="/assets/Doker安装Redis.html.e01811d9.js"><link rel="prefetch" href="/assets/Linux定时脚本.html.0773130e.js"><link rel="prefetch" href="/assets/Linux问题归档.html.836078cf.js"><link rel="prefetch" href="/assets/Ubuntu设置国内镜像软件源.html.36089e7f.js"><link rel="prefetch" href="/assets/Ubuntu设置远程登陆.html.989392fb.js"><link rel="prefetch" href="/assets/PigGo_图床.html.7c94cd32.js"><link rel="prefetch" href="/assets/WSL2使用文档.html.17f7d9b8.js"><link rel="prefetch" href="/assets/Windows使用WSL2.html.6a552282.js"><link rel="prefetch" href="/assets/Hystrixs-断路由使用.html.e43be0b5.js"><link rel="prefetch" href="/assets/Spring-Gateway配置说明.html.77da2095.js"><link rel="prefetch" href="/assets/Loadbalancer负载均衡.html.3a0a3ad7.js"><link rel="prefetch" href="/assets/Ribbon负载均衡服务.html.7d2b1290.js"><link rel="prefetch" href="/assets/服务调用OpenFeign.html.937ef2d2.js"><link rel="prefetch" href="/assets/Seata分布式事务.html.c4acbc31.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动-消费异常处理机制.html.6aa10f8f.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动消息过滤的三种方式.html.419c75d5.js"><link rel="prefetch" href="/assets/Spring-Cloud-Stream消息驱动配置.html.82681e2a.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现事务消息(三).html.9f32a439.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现广播和顺序消息(一).html.cd050fc9.js"><link rel="prefetch" href="/assets/Stream整合Rocketmq实现延时消息(二).html.bf43339a.js"><link rel="prefetch" href="/assets/Sleuth和Zipkin.html.1847a36b.js"><link rel="prefetch" href="/assets/DDL数据库定义语言.html.a1b0f725.js"><link rel="prefetch" href="/assets/DML数据处理之增删改.html.4cdfca73.js"><link rel="prefetch" href="/assets/SQL练习-01.html.77d68c39.js"><link rel="prefetch" href="/assets/分组函数.html.cb093a68.js"><link rel="prefetch" href="/assets/分组查询.html.d18eada3.js"><link rel="prefetch" href="/assets/分页查询.html.f56764e6.js"><link rel="prefetch" href="/assets/单行函数.html.deb9ae79.js"><link rel="prefetch" href="/assets/基本查询.html.8310c45c.js"><link rel="prefetch" href="/assets/排序查询.html.d998eca8.js"><link rel="prefetch" href="/assets/数据事务.html.ab27f45c.js"><link rel="prefetch" href="/assets/数据库和SQL概述.html.5ae239f0.js"><link rel="prefetch" href="/assets/条件查询.html.f14c61c1.js"><link rel="prefetch" href="/assets/联合查询.html.d8a5248d.js"><link rel="prefetch" href="/assets/连接查询.html.a0959fc2.js"><link rel="prefetch" href="/assets/404.html.9b9bf036.js"><link rel="prefetch" href="/assets/404.1cfa2fc0.js"><link rel="prefetch" href="/assets/Layout.ce6856c3.js">
    <link rel="stylesheet" href="/assets/style.811e635c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/png/logo.png" alt="青衣水袖"><span class="site-name can-hide">青衣水袖</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/newApi/8-17新特性API.html" class="" aria-label="Java 版本特性"><!--[--><!--]--> Java 版本特性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/base/Java环境变量配置.html" class="" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/thread/线程基本概念.html" class="" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring 系列</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/backend/springboot/helloworld.html" class="" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud Alibaba"><!--[--><!--]--> Spring Cloud Alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/base/数据库和SQL概述.html" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/pxc/安装Percona数据库.html" class="" aria-label="Percona Xtradb Cluster"><!--[--><!--]--> Percona Xtradb Cluster <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/linux/Ubuntu设置国内镜像软件源.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker/Docker安装.html" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/mix/PigGo+图床.html" class="" aria-label="杂项"><!--[--><!--]--> 杂项 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/TypeScript学习.html" class="" aria-label="TypeScript学习"><!--[--><!--]--> TypeScript学习 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/moomhub/Notes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/newApi/8-17新特性API.html" class="" aria-label="Java 版本特性"><!--[--><!--]--> Java 版本特性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/base/Java环境变量配置.html" class="" aria-label="Java 基础"><!--[--><!--]--> Java 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/thread/线程基本概念.html" class="" aria-label="多线程"><!--[--><!--]--> 多线程 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端文档"><span class="title">后端文档</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring 系列</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/backend/springboot/helloworld.html" class="" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud"><!--[--><!--]--> Spring Cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/backend/springcloud/gateway/Spring-Gateway配置说明.html" class="" aria-label="Spring Cloud Alibaba"><!--[--><!--]--> Spring Cloud Alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/database/mysql/base/数据库和SQL概述.html" class="" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/database/pxc/安装Percona数据库.html" class="" aria-label="Percona Xtradb Cluster"><!--[--><!--]--> Percona Xtradb Cluster <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/other/linux/Ubuntu设置国内镜像软件源.html" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/docker/Docker安装.html" class="" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/other/mix/PigGo+图床.html" class="" aria-label="杂项"><!--[--><!--]--> 杂项 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/TypeScript学习.html" class="" aria-label="TypeScript学习"><!--[--><!--]--> TypeScript学习 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/moomhub/Notes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Docker 基础 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/other/docker/Docker%E5%AE%89%E8%A3%85.html" class="sidebar-item" aria-label="Docker 安装"><!--[--><!--]--> Docker 安装 <!--[--><!--]--></a><!----></li><li><a href="/other/docker/Docker%E8%BF%90%E8%A1%8C%E8%AE%BE%E7%BD%AEIP.html" class="sidebar-item" aria-label="Docker运行设置IP"><!--[--><!--]--> Docker运行设置IP <!--[--><!--]--></a><!----></li><li><a href="/other/docker/Docker%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E.html" class="sidebar-item" aria-label="Dockers 命令说明"><!--[--><!--]--> Dockers 命令说明 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Docker 安装应用 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/other/docker/Docker%E5%AE%89%E8%A3%85Web%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0.html" class="sidebar-item" aria-label="Docker 安装 Web 管理平台"><!--[--><!--]--> Docker 安装 Web 管理平台 <!--[--><!--]--></a><!----></li><li><a href="/other/docker/Docker%E5%AE%89%E8%A3%85Nacos.html" class="sidebar-item" aria-label="Docker 安装Nacos"><!--[--><!--]--> Docker 安装Nacos <!--[--><!--]--></a><!----></li><li><a href="/other/docker/Doker%E5%AE%89%E8%A3%85Redis.html" class="sidebar-item" aria-label="Doker安装Redis"><!--[--><!--]--> Doker安装Redis <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Docker 安装 mysql"><!--[--><!--]--> Docker 安装 mysql <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#下载-mysql-镜像" class="router-link-active router-link-exact-active sidebar-item" aria-label="下载 Mysql 镜像"><!--[--><!--]--> 下载 Mysql 镜像 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#查看-docker-日志" class="router-link-active router-link-exact-active sidebar-item" aria-label="查看 docker 日志"><!--[--><!--]--> 查看 docker 日志 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用命令"><!--[--><!--]--> 常用命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#mysql-主从分离-docker" class="router-link-active router-link-exact-active sidebar-item" aria-label="Mysql 主从分离（Docker）"><!--[--><!--]--> Mysql 主从分离（Docker） <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#创建配置文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建配置文件"><!--[--><!--]--> 创建配置文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#master-主库" class="router-link-active router-link-exact-active sidebar-item" aria-label="Master 主库"><!--[--><!--]--> Master 主库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#slave-主库" class="router-link-active router-link-exact-active sidebar-item" aria-label="Slave 主库"><!--[--><!--]--> Slave 主库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#从库设置为只读" class="router-link-active router-link-exact-active sidebar-item" aria-label="从库设置为只读"><!--[--><!--]--> 从库设置为只读 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#docker-里面-mysql-默认的配置信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker 里面 MySql 默认的配置信息"><!--[--><!--]--> Docker 里面 MySql 默认的配置信息 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#docker-复制命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="docker 复制命令"><!--[--><!--]--> docker 复制命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/other/docker/Docker%E5%AE%89%E8%A3%85Mysql.html#设置-docker-开机自启动如下" class="router-link-active router-link-exact-active sidebar-item" aria-label="设置 docker 开机自启动如下："><!--[--><!--]--> 设置 docker 开机自启动如下： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/other/docker/Docker%E9%83%A8%E7%BD%B2haproxy.html" class="sidebar-item" aria-label="Docker部署haproxy"><!--[--><!--]--> Docker部署haproxy <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="docker-安装-mysql" tabindex="-1"><a class="header-anchor" href="#docker-安装-mysql" aria-hidden="true">#</a> <strong>Docker 安装 mysql</strong></h1><h2 id="下载-mysql-镜像" tabindex="-1"><a class="header-anchor" href="#下载-mysql-镜像" aria-hidden="true">#</a> <strong>下载 Mysql 镜像</strong></h2><p><strong><code>命令：</code>docker pull mysql</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117101907475-1388871070.png" alt="img"></strong></p><p><strong>查看镜像</strong></p><p><strong><code>命令：</code>docker images</strong></p><p><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/image-20220318143914640.png" alt="image-20220318143914640">**</p><p><strong>在 opt 下创建文件夹</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd /opt/
mkdir mysql_docker
cd mysql_docker/
echo $PWD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117101933202-1072982636.png" alt="img"></strong></p><p><strong>5、启动 mysql 容器，在 var/lib/docker/containers/下查看容器</strong></p><p><strong><code>命令：</code></strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --name mysql-master -v <span class="token environment constant">$PWD</span>/conf:/etc/mysql/conf.d -v <span class="token environment constant">$PWD</span>/logs:/logs -v <span class="token environment constant">$PWD</span>/data:/var/lib/mysql -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> -d -i -p <span class="token number">3307</span>:3306 mysql:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --name mysql-slave -v <span class="token environment constant">$PWD</span>/conf:/etc/mysql/conf.d -v <span class="token environment constant">$PWD</span>/logs:/logs -v <span class="token environment constant">$PWD</span>/data:/var/lib/mysql -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> -d -i -p <span class="token number">3308</span>:3306 mysql:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117101951542-1388225438.png" alt="img"></strong></p><p><strong><code>命令：</code>cd /var/lib/docker/containers/</strong></p><p><strong>6、查看 mysql 进程</strong></p><p><strong><code>命令：</code>docker ps -a</strong></p><p><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/image-20220318143901289.png" alt="image-20220318143901289">**</p><p><strong>7、进入 mysql 容器，并登陆 mysql</strong></p><p><strong><code>命令：</code></strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker exec -it mysql-master bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>命令：`mysql -uroot -p</strong></p><p><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/image-20220318143837718.png" alt="image-20220318143837718">**</p><p><strong>8、开启远程访问权限</strong></p><p><strong><code>命令：</code>use mysql;</strong><strong><code>命令：</code>select host,user from user;</strong><strong><code>命令：</code>ALTER USER &#39;slave&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;;</strong><strong><code>命令：</code>flush privileges;</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117102022439-1012036839.png" alt="img"></strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117102030619-917697046.png" alt="img"></strong></p><p><strong>镜像里面 root 用户已经有远程连接权限在里面，所以不需要去设置，只是模式不一样才导致无法连接，把 root 用户的密码改成 mysql_native_password 模式，即可远程连接</strong></p><h2 id="查看-docker-日志" tabindex="-1"><a class="header-anchor" href="#查看-docker-日志" aria-hidden="true">#</a> <strong>查看 docker 日志</strong></h2><p><strong><code>命令：</code>docker logs -f --tail 10 a4dac74d48f7</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117102048856-1273275706.png" alt="img"></strong></p><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> <strong>常用命令</strong></h2><ul><li><strong>查看进程</strong></li></ul><p><strong><code>命令：</code>docker ps -a</strong></p><ul><li><strong>关闭 docker 中 mysql 容器</strong></li></ul><p><strong><code>命令：</code>docker stop mysqlserver</strong></p><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117102059917-479100535.png" alt="img"></strong></p><ul><li><strong>重启 docker 中 mysql 重启</strong></li></ul><p><strong><img src="https://cdn.jsdelivr.net/gh/moomhub/notes_images01/images/997646-20200117102109562-1174307222.png" alt="img"></strong></p><ul><li><strong>重启 docker</strong></li></ul><p><strong><code>命令：</code>systemctl restart docker</strong></p><ul><li><strong>关闭 docker</strong></li></ul><p><strong><code>命令：</code>systemctl stop docker</strong></p><h2 id="mysql-主从分离-docker" tabindex="-1"><a class="header-anchor" href="#mysql-主从分离-docker" aria-hidden="true">#</a> Mysql 主从分离（Docker）</h2><h3 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件" aria-hidden="true">#</a> 创建配置文件</h3><p>默认 docker 数据目录：/opt/docker/mysql/</p><p>主数据库（master）配置文件/usr/local/mysql/master/conf/my.cnf:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
og-bin<span class="token operator">=</span>mysql-bin
server-id<span class="token operator">=</span><span class="token number">1</span>   <span class="token comment">#注意这个id&gt;0且要唯一</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从数据库（slave）配置文件/usr/local/mysql/slave/my.cnf:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
log-bin<span class="token operator">=</span>mysql-bin
server-id<span class="token operator">=</span><span class="token number">2</span>   <span class="token comment">#注意这个id&gt;0且要唯一</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：我是在容器外部进行的配置，喜欢进入容器内部配置 路径 /etc/mysql/my.cnf</p><h3 id="master-主库" tabindex="-1"><a class="header-anchor" href="#master-主库" aria-hidden="true">#</a> Master 主库</h3><p>创建 Master 主库</p><p>docker 运行 挂载相关文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --name mysql-master  <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/mysqls/conf/my.cnf,dst<span class="token operator">=</span>/etc/mysql/my.cnf <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/logs:/logs <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/data:/var/lib/mysql <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.2 <span class="token punctuation">\</span>
--dns <span class="token number">8.8</span>.8.8 --dns <span class="token number">114.114</span>.114.114 <span class="token punctuation">\</span>
-d -i -p <span class="token number">3307</span>:3306 mysql:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Master 主库设置</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#进入主库</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it mysql-master <span class="token function">bash</span>
<span class="token comment">#进入mysql</span>
mysql -u root -p

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建 MySQL 从库用户</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; 172.17.0.10 为从库在docker 中的IP
&gt; 查看IP :
&gt; 1、内部查看 cat /etc/hosts
&gt; 2、docker 命令查看 `docker inspect --format=&#39;{{.NetworkSettings.IPAddress}}&#39; `容器名称|容器id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE USER &#39;slave&#39;@&#39;172.17.0.10&#39; IDENTIFIED BY &#39;slave123&#39;;
# 设置权限
GRANT ALL  ON *.* TO &#39;slave&#39;@&#39;172.17.0.10&#39;;
# 修改认证认证方式
ALTER USER &#39;slave&#39; IDENTIFIED WITH mysql_native_password BY &#39;slave123&#39;;
FLUSH PRIVILEGES;
# 显示主库信息 master状态
SHOW MASTER STATUS;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>从库连接到主库时 报错：----&gt;mysql Authentication plugin &#39;caching_sha2_password&#39; is not supported 问题处理</p><p>使用 mysql8.0 版本，登录失败，提示 Authentication plugin &#39;caching_sha2_password&#39; is not supported。 原因是在 MySQL 8.0 以后，默认的密码加密方式是 caching_sha2_password 而不是 mysql_native_password。</p><p>解决方法：</p><p>2.更新身份认证方式 ALTER USER &#39;你的用户名&#39; IDENTIFIED WITH mysql_native_password BY &#39;你的用户密码&#39;;</p></blockquote><h3 id="slave-主库" tabindex="-1"><a class="header-anchor" href="#slave-主库" aria-hidden="true">#</a> Slave 主库</h3><p>创建 Slave 主库</p><p>Docker 运行 挂载相关文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --name mysql-slave  <span class="token punctuation">\</span>
--mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,src<span class="token operator">=</span>/opt/docker/mysqls/conf/my.cnf,dst<span class="token operator">=</span>/etc/mysql/my.cnf <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/logs:/logs <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/data:/var/lib/mysql <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
--network mynetwork --ip <span class="token number">172.18</span>.0.2 <span class="token punctuation">\</span>
--dns <span class="token number">8.8</span>.8.8 --dns <span class="token number">114.114</span>.114.114 <span class="token punctuation">\</span>
-d -i -p <span class="token number">3308</span>:3306 mysql:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Slave 从库设置</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#进入主库</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it mysql-slave <span class="token function">bash</span>
<span class="token comment">#进入mysql</span>
mysql -u root -p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mysql Slave 从库设置</p><blockquote><p>172.17.0.9 ---- 主库 IP slave ----- 用户名 slave123 ----- 密码 mysql-bin.000003 -----主库信息</p></blockquote><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># 停止从库
stop slave;
# 设置主库信息
CHANGE MASTER TO MASTER_HOST=&#39;172.17.0.9&#39;, MASTER_USER=&#39;slave&#39;, MASTER_PASSWORD=&#39;slave123&#39;, MASTER_LOG_FILE=&#39;mysql-bin.000003&#39;;
# 开始从库
start slave;
# 查看连接状态
show slave status \G;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CHANGE MASTER TO MASTER_HOST=&#39;172.17.0.9&#39;, \
MASTER_USER=&#39;slave’&#39;, \
MASTER_PASSWORD=&#39;slave’123&#39;, \
MASTER_LOG_FILE=&#39;mysql-bin.000004&#39;, \
MASTER_LOG_POS=892;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>成功后</p><p>Master Slave 常见配置</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">#mysqld字段增加如下信息</span>
log-bin<span class="token operator">=</span>mysql-bin   <span class="token comment">#开启log bin</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed <span class="token comment">#日志格式</span>
server-id   <span class="token operator">=</span> <span class="token number">1</span>     <span class="token comment">#server id,跟slave配置不同server-id,例这里写1,slave可以写1除外2.3.4...</span>
expire_logs_days <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">#日志保存时间</span>
binlog-ignore-db<span class="token operator">=</span>information_schema <span class="token comment">#这是mysql默认的数据库,忽略掉</span>
binlog-ignore-db<span class="token operator">=</span>mysql              <span class="token comment">#这是mysql默认的数据库,忽略掉</span>
binlog-ignore-db<span class="token operator">=</span>performance_schema <span class="token comment">#这是mysql默认的数据库,忽略掉</span>
binlog-do-db<span class="token operator">=</span>testOrderDb    <span class="token comment">#需要同步的数据库</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="从库设置为只读" tabindex="-1"><a class="header-anchor" href="#从库设置为只读" aria-hidden="true">#</a> 从库设置为只读</h3><p>mysql 主从复制，slave 从库只读配置对于需要保证 master-slave 主从同步的 salve 库，如果要设置为只读状态，需要执行的命令为：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>set global read_only=1;  对于非root用户，切换到root用户后还是可以进行增删改查的哦。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>read_only=1 只读模式，可以限定普通用户进行数据修改的操作，但不会限定具有 super 权限的用户（如超级管理员 root 用户）的数据修改操作。</p><h3 id="docker-里面-mysql-默认的配置信息" tabindex="-1"><a class="header-anchor" href="#docker-里面-mysql-默认的配置信息" aria-hidden="true">#</a> Docker 里面 MySql 默认的配置信息</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code># docker 里面默认的配置信息
[mysqld]
server-id=2
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
secure-file-priv= NULL

# Custom config should go here
!includedir /etc/mysql/conf.d/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-复制命令" tabindex="-1"><a class="header-anchor" href="#docker-复制命令" aria-hidden="true">#</a> docker 复制命令</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">cp</span> mysql-master:/etc/mysql/my.cnf /opt/a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="设置-docker-开机自启动如下" tabindex="-1"><a class="header-anchor" href="#设置-docker-开机自启动如下" aria-hidden="true">#</a> 设置 docker 开机自启动如下：</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl enable docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>which mysqld</p><p>/usr/sbin/mysqld --verbose --help | grep -A 1 &#39;Default options&#39;</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/moomhub/Notes/edit/main/docs/other/docker/Docker安装Mysql.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2208300539@qq.com">MoomHub</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/other/docker/Doker%E5%AE%89%E8%A3%85Redis.html" class="" aria-label="Doker安装Redis"><!--[--><!--]--> Doker安装Redis <!--[--><!--]--></a></span><span class="next"><a href="/other/docker/Docker%E9%83%A8%E7%BD%B2haproxy.html" class="" aria-label="Docker部署haproxy"><!--[--><!--]--> Docker部署haproxy <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4a9c1875.js" defer></script>
  </body>
</html>
